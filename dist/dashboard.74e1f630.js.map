{"mappings":"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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-1ec3c988decec067.js","docs/js/dashboard/main.js","docs/js/dashboard/auth.js","docs/js/supabase-client.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","docs/js/dashboard/assessments.js","docs/js/dashboard/gamification.js","docs/js/dashboard/import.js","docs/js/dashboard/ui.js","docs/js/dashboard/achievements.js","docs/js/dashboard/admin-ui.js","docs/js/dashboard/compare.js","docs/js/assessment/scoring.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SERVER_PORT = 1234;var HMR_SECURE = false;var HMR_ENV_HASH = \"439701173a9199ea\";var HMR_USE_SSE = false;module.bundle.HMR_BUNDLE_ID = \"ee7cde1e74e1f630\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_SERVER_PORT, HMR_ENV_HASH, HMR_SECURE, HMR_USE_SSE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_SERVER_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var HMR_USE_SSE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */,\n  disposedAssets /*: {|[string]: boolean|} */,\n  assetsToDispose /*: Array<[ParcelRequire, string]> */,\n  assetsToAccept /*: Array<[ParcelRequire, string]> */,\n  bundleNotFound = false;\nfunction getHostname() {\n  return HMR_HOST || (typeof location !== 'undefined' && location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || (typeof location !== 'undefined' ? location.port : HMR_SERVER_PORT);\n}\n\n// eslint-disable-next-line no-redeclare\nlet WebSocket = globalThis.WebSocket;\nif (!WebSocket && typeof module.bundle.root === 'function') {\n  try {\n    // eslint-disable-next-line no-global-assign\n    WebSocket = module.bundle.root('ws');\n  } catch {\n    // ignore.\n  }\n}\nvar hostname = getHostname();\nvar port = getPort();\nvar protocol = HMR_SECURE || typeof location !== 'undefined' && location.protocol === 'https:' && !['localhost', '127.0.0.1', '0.0.0.0'].includes(hostname) ? 'wss' : 'ws';\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif (!parent || !parent.isParcelRequire) {\n  // Web extension context\n  var extCtx = typeof browser === 'undefined' ? typeof chrome === 'undefined' ? null : chrome : browser;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n  var ws;\n  if (HMR_USE_SSE) {\n    ws = new EventSource('/__parcel_hmr');\n  } else {\n    try {\n      // If we're running in the dev server's node runner, listen for messages on the parent port.\n      let {\n        workerData,\n        parentPort\n      } = module.bundle.root('node:worker_threads') /*: any*/;\n      if (workerData !== null && workerData !== void 0 && workerData.__parcel) {\n        parentPort.on('message', async message => {\n          try {\n            await handleMessage(message);\n            parentPort.postMessage('updated');\n          } catch {\n            parentPort.postMessage('restart');\n          }\n        });\n\n        // After the bundle has finished running, notify the dev server that the HMR update is complete.\n        queueMicrotask(() => parentPort.postMessage('ready'));\n      }\n    } catch {\n      if (typeof WebSocket !== 'undefined') {\n        try {\n          ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n        } catch (err) {\n          // Ignore cloudflare workers error.\n          if (err.message && !err.message.includes('Disallowed operation called within global scope')) {\n            console.error(err.message);\n          }\n        }\n      }\n    }\n  }\n  if (ws) {\n    // $FlowFixMe\n    ws.onmessage = async function (event /*: {data: string, ...} */) {\n      var data /*: HMRMessage */ = JSON.parse(event.data);\n      await handleMessage(data);\n    };\n    if (ws instanceof WebSocket) {\n      ws.onerror = function (e) {\n        if (e.message) {\n          console.error(e.message);\n        }\n      };\n      ws.onclose = function () {\n        console.warn('[parcel]  Connection to the HMR server was lost');\n      };\n    }\n  }\n}\nasync function handleMessage(data /*: HMRMessage */) {\n  checkedAssets = {} /*: {|[string]: boolean|} */;\n  disposedAssets = {} /*: {|[string]: boolean|} */;\n  assetsToAccept = [];\n  assetsToDispose = [];\n  bundleNotFound = false;\n  if (data.type === 'reload') {\n    fullReload();\n  } else if (data.type === 'update') {\n    // Remove error overlay if there is one\n    if (typeof document !== 'undefined') {\n      removeErrorOverlay();\n    }\n    let assets = data.assets;\n\n    // Handle HMR Update\n    let handled = assets.every(asset => {\n      return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n    });\n\n    // Dispatch a custom event in case a bundle was not found. This might mean\n    // an asset on the server changed and we should reload the page. This event\n    // gives the client an opportunity to refresh without losing state\n    // (e.g. via React Server Components). If e.preventDefault() is not called,\n    // we will trigger a full page reload.\n    if (handled && bundleNotFound && assets.some(a => a.envHash !== HMR_ENV_HASH) && typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n      handled = !window.dispatchEvent(new CustomEvent('parcelhmrreload', {\n        cancelable: true\n      }));\n    }\n    if (handled) {\n      console.clear();\n\n      // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n      if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n        window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n      }\n      await hmrApplyUpdates(assets);\n      hmrDisposeQueue();\n\n      // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n      let processedAssets = {};\n      for (let i = 0; i < assetsToAccept.length; i++) {\n        let id = assetsToAccept[i][1];\n        if (!processedAssets[id]) {\n          hmrAccept(assetsToAccept[i][0], id);\n          processedAssets[id] = true;\n        }\n      }\n    } else fullReload();\n  }\n  if (data.type === 'error') {\n    // Log parcel errors to console\n    for (let ansiDiagnostic of data.diagnostics.ansi) {\n      let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n      console.error(' [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n    }\n    if (typeof document !== 'undefined') {\n      // Render the fancy html overlay\n      removeErrorOverlay();\n      var overlay = createErrorOverlay(data.diagnostics.html);\n      // $FlowFixMe\n      document.body.appendChild(overlay);\n    }\n  }\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel]  Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"${protocol === 'wss' ? 'https' : 'http'}://${hostname}:${port}/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n           ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div> ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div> <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if (typeof location !== 'undefined' && 'reload' in location) {\n    location.reload();\n  } else if (typeof extCtx !== 'undefined' && extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  } else {\n    try {\n      let {\n        workerData,\n        parentPort\n      } = module.bundle.root('node:worker_threads') /*: any*/;\n      if (workerData !== null && workerData !== void 0 && workerData.__parcel) {\n        parentPort.postMessage('restart');\n      }\n    } catch (err) {\n      console.error('[parcel]  An HMR update was not accepted. Please restart the process.');\n    }\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout || typeof document === 'undefined') {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 || _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension fix\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3 && typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n            extCtx.runtime.reload();\n            return;\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 || _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    }\n\n    // Always traverse to the parent bundle, even if we already replaced the asset in this bundle.\n    // This is required in case modules are duplicated. We need to ensure all instances have the updated code.\n    if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  checkedAssets = {};\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else if (a !== null) {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      bundleNotFound = true;\n      return true;\n    }\n    return hmrAcceptCheckOne(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return null;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  if (!cached) {\n    return true;\n  }\n  assetsToDispose.push([bundle, id]);\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n  return false;\n}\nfunction hmrDisposeQueue() {\n  // Dispose all old assets.\n  for (let i = 0; i < assetsToDispose.length; i++) {\n    let id = assetsToDispose[i][1];\n    if (!disposedAssets[id]) {\n      hmrDispose(assetsToDispose[i][0], id);\n      disposedAssets[id] = true;\n    }\n  }\n  assetsToDispose = [];\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    let assetsToAlsoAccept = [];\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      let additionalAssets = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (Array.isArray(additionalAssets) && additionalAssets.length) {\n        assetsToAlsoAccept.push(...additionalAssets);\n      }\n    });\n    if (assetsToAlsoAccept.length) {\n      let handled = assetsToAlsoAccept.every(function (a) {\n        return hmrAcceptCheck(a[0], a[1]);\n      });\n      if (!handled) {\n        return fullReload();\n      }\n      hmrDisposeQueue();\n    }\n  }\n}","// js/dashboard/main.js\r\n// Main entry point for the dashboard application.\r\n// Initializes the app, loads modules, and coordinates everything.\r\n\r\nimport { checkAuth, getIsAdmin, getCurrentUser } from './auth.js';\r\nimport { loadAssessments, viewAssessment, deleteAssessment as deleteAssessmentFn, filterAssessmentsLegacy, clearAllFiltersLegacy } from './assessments.js';\r\nimport { initImport, handleFileSelect, processImport } from './import.js';\r\nimport { updateDashboardStats, updateProgressTracking } from './gamification.js';\r\nimport { AchievementsManager } from './achievements.js';\r\nimport { updateTierBadge, setupEventListeners, closeBanner, switchTab } from './ui.js';\r\nimport { injectDashboardAdminUI } from './admin-ui.js';\r\nimport { initCompareTools, setupEventListeners as setupCompareEventListeners } from './compare.js';\r\n\r\nimport { supabase } from '../supabase-client.js';\r\n\r\nlet currentTab = 'dashboard';\r\n\r\n// Make functions available globally BEFORE DOMContentLoaded\r\n// so that inline onclick handlers in the HTML can call them immediately\r\nwindow.switchTab = switchTab;\r\nwindow.viewAssessment = viewAssessment;\r\nwindow.deleteAssessment = async (id) => {\r\n    await deleteAssessmentFn(id);\r\n    // Refresh achievements after deletion\r\n    if (window.achievementsManager) {\r\n        window.achievementsManager.updateProgress();\r\n    }\r\n};\r\nwindow.loadAssessments = loadAssessments;\r\nwindow.clearAllFilters = clearAllFiltersLegacy; // Use the legacy function\r\nwindow.clearAllFiltersLegacy = clearAllFiltersLegacy; // Also export with the new name\r\nwindow.closeBanner = closeBanner;\r\nwindow.handleFileSelect = handleFileSelect;\r\nwindow.processImport = processImport;\r\n\r\ndocument.addEventListener('DOMContentLoaded', async function() {\r\n    console.log('Modern Dashboard initializing...');\r\n    \r\n        console.log('Supabase client initialized');\r\n    \r\n\r\n    initImport(supabase);\r\n\r\n    const isAuthenticated = await checkAuth();\r\n    \r\n    if (isAuthenticated) {\r\n        await initializeDashboard();\r\n    } else {\r\n        const mainContent = document.querySelector('.flex-1.p-6');\r\n        if (mainContent) {\r\n            mainContent.innerHTML = `\r\n                <div class=\"text-center p-10 bg-gray-800 rounded-lg\">\r\n                    <h2 class=\"text-2xl font-bold mb-2\">Access Denied</h2>\r\n                    <p class=\"text-gray-400\">Please sign in to view the dashboard.</p>\r\n                    <a href=\"index.html\" class=\"mt-4 inline-block bg-blue-600 px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\">\r\n                        Go to Sign In\r\n                    </a>\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n    \r\n    setupEventListeners();\r\n    setupCompareEventListeners();\r\n    \r\n    if (typeof lucide !== 'undefined') {\r\n        lucide.createIcons();\r\n    }\r\n});\r\n\r\nasync function initializeDashboard() {\r\n    try {\r\n        const isAdminUser = getIsAdmin();\r\n        console.log('Is Admin User:', isAdminUser);\r\n        console.log('Current user metadata:', getCurrentUser()?.user_metadata);\r\n        \r\n        if (isAdminUser) {\r\n            console.log('Injecting admin UI...');\r\n            injectDashboardAdminUI();\r\n        } else {\r\n            console.log('User is not admin, skipping admin UI injection');\r\n        }\r\n        \r\n        // Wrap loadAssessments in a more robust error handler\r\n        try {\r\n            await loadAssessments();\r\n        } catch (loadError) {\r\n            console.error('Failed to load assessments:', loadError);\r\n            \r\n            // Render a user-friendly error message\r\n            const container = document.getElementById('assessment-list');\r\n            if (container) {\r\n                container.innerHTML = `\r\n                    <div class=\"error-state-container\">\r\n                        <i data-lucide=\"alert-triangle\" class=\"error-icon text-red-500\"></i>\r\n                        <h3 class=\"error-title text-lg font-bold\">Unable to Load Assessments</h3>\r\n                        <p class=\"error-message text-gray-400\">\r\n                            We couldn't retrieve your assessments at this time. \r\n                            This could be due to a network issue or temporary service disruption.\r\n                        </p>\r\n                        <button onclick=\"loadAssessments()\" class=\"btn btn-secondary mt-4\">\r\n                            <i data-lucide=\"refresh-cw\" class=\"w-4 h-4 mr-2\"></i>\r\n                            Retry Loading\r\n                        </button>\r\n                    </div>\r\n                `;\r\n                \r\n                // Reinitialize Lucide icons\r\n                if (typeof lucide !== 'undefined') {\r\n                    setTimeout(() => lucide.createIcons(), 100);\r\n                }\r\n            }\r\n        }\r\n        \r\n        updateDashboardStats();\r\n        updateProgressTracking();\r\n        \r\n        // Initialize achievements\r\n        window.achievementsManager = new AchievementsManager();\r\n        window.achievementsManager.initialize();\r\n\r\n        updateTierBadge();\r\n        \r\n        console.log('Dashboard initialized successfully');\r\n    } catch (error) {\r\n        console.error('Failed to initialize dashboard:', error);\r\n        \r\n        // Render a global error state\r\n        const mainContent = document.querySelector('.flex-1.p-6');\r\n        if (mainContent) {\r\n            mainContent.innerHTML = `\r\n                <div class=\"text-center p-10 bg-gray-800 rounded-lg\">\r\n                    <h2 class=\"text-2xl font-bold mb-2 text-red-500\">Dashboard Initialization Failed</h2>\r\n                    <p class=\"text-gray-400\">We encountered an unexpected error. Please try refreshing the page.</p>\r\n                    <button onclick=\"window.location.reload()\" class=\"mt-4 inline-block bg-blue-600 px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\">\r\n                        Reload Page\r\n                    </button>\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n}","// js/dashboard/auth.js\r\n// Handles user authentication, session management, and login UI. \r\n\r\nimport { supabase } from '../supabase-client.js';\r\n\r\n// State variables\r\nlet currentUser = null;\r\nlet isAdmin = false;\r\nlet userTier = 'free';\r\n\r\n\r\n\r\nexport async function checkAuth() {\r\n    try {\r\n        const { data: { session } } = await supabase.auth.getSession();\r\n        \r\n        if (session) {\r\n            currentUser = session.user;\r\n            // Determine user tier\r\n            userTier = currentUser.user_metadata?.tier || 'free';\r\n            // Only treat explicit admin role as admin\r\n            isAdmin = currentUser.user_metadata?.role === 'admin';\r\n            \r\n            console.log('User authenticated:', currentUser.email);\r\n            console.log('User metadata:', currentUser.user_metadata);\r\n            console.log('Tier:', userTier, 'Admin:', isAdmin);\r\n            console.log('Role from metadata:', currentUser.user_metadata?.role);\r\n            return true;\r\n        } else {\r\n            console.log('No active session');\r\n            return false;\r\n        }\r\n    } catch (error) {\r\n        console.error('Auth check failed:', error);\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function showLoginSection() {\r\n    const loginSection = document.getElementById('loginSection');\r\n    if(loginSection) {\r\n        loginSection.style.display = 'block';\r\n        loginSection.innerHTML = `\r\n            <div class=\"login-container\">\r\n                <h2>Please Sign In</h2>\r\n                <p>You need to be signed in to access the dashboard.</p>\r\n                <a href=\"index.html\" class=\"btn btn-primary\">Go to Login</a>\r\n            </div>\r\n        `;\r\n    }\r\n}\r\n\r\nexport function getCurrentUser() {\r\n    return currentUser;\r\n}\r\n\r\nexport function getIsAdmin() {\r\n    return isAdmin;\r\n}\r\n\r\nexport function getUserTier() {\r\n    return userTier;\r\n}\r\n\r\nexport function getIsEnterprise() {\r\n    return userTier === 'enterprise';\r\n}\r\n\r\nexport function getIsFree() {\r\n    return userTier === 'free';\r\n}","// docs/js/supabase-client.js\n\n// Use the global Supabase object loaded from CDN in index.html\nconst SUPABASE_URL = 'https://lgybmsziqjdmmxdiyils.supabase.co';\nconst SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxneWJtc3ppcWpkbW14ZGl5aWxzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3MTAzOTcsImV4cCI6MjA2NjI4NjM5N30.GFqiwK2qi3TnlUDCmdFZpG69pqdPP-jpbxdUGX6VlSg';\n\n// Check if Supabase is available globally (from CDN)\nlet supabase;\n\n// Initialize the global Supabase client if it doesn't exist\nif (typeof window !== 'undefined') {\n    if (window.supabase) {\n        // Use the global Supabase object if available\n        console.log('Using global Supabase client from CDN');\n        supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n    } else if (typeof window.supabaseClient !== 'undefined') {\n        // Use existing client if already initialized\n        console.log('Using existing Supabase client');\n        supabase = window.supabaseClient;\n    } else if (typeof window.createClient !== 'undefined') {\n        // Use the global createClient function if available\n        console.log('Creating Supabase client with global createClient');\n        supabase = window.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n        // Store for reuse\n        window.supabaseClient = supabase;\n    } else {\n        // Fallback to mock implementation for pages that don't load the CDN\n        console.log('Using mock Supabase client');\n        supabase = createMockClient();\n        // Store for reuse\n        window.supabaseClient = supabase;\n    }\n} else {\n    // Fallback for non-browser environments\n    console.log('Using mock Supabase client (non-browser environment)');\n    supabase = createMockClient();\n}\n\n// Export the Supabase client\nexport { supabase };\n\n// Mock client implementation for pages that don't load the CDN\nfunction createMockClient() {\n    return {\n        auth: {\n            getSession: async () => {\n                return { data: { session: null }, error: null };\n            },\n            onAuthStateChange: (callback) => {\n                console.log('Auth state change listener registered (mock)');\n                return () => {};\n            },\n            signInWithPassword: async () => {\n                console.log('Mock sign in');\n                return { error: new Error('Authentication not available in this view') };\n            },\n            signUp: async () => {\n                console.log('Mock sign up');\n                return { error: new Error('Authentication not available in this view') };\n            },\n            signOut: async () => {\n                console.log('Mock sign out');\n                return { error: null };\n            }\n        },\n        from: (table) => ({\n            select: () => ({\n                execute: async () => ({ data: [], error: null }),\n                eq: () => ({\n                    execute: async () => ({ data: [], error: null }),\n                    single: async () => ({ data: null, error: null })\n                })\n            }),\n            insert: () => ({\n                execute: async () => ({ data: { id: 'mock-id' }, error: null })\n            }),\n            update: () => ({\n                eq: () => ({\n                    execute: async () => ({ data: null, error: null })\n                })\n            }),\n            delete: () => ({\n                eq: () => ({\n                    execute: async () => ({ data: null, error: null })\n                })\n            })\n        })\n    };\n}","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","// js/dashboard/assessments.js\r\n// Handles fetching, rendering, filtering, and managing assessments. \r\n\r\nimport { supabase } from '../supabase-client.js';\r\nimport { getIsAdmin, getCurrentUser } from './auth.js';\r\nimport { updateDashboardStats, updateProgressTracking } from './gamification.js';\r\n\r\nlet assessments = [];\r\nlet expandedAssessmentId = null;\r\n\r\nexport function getAssessments() {\r\n    return assessments;\r\n}\r\n\r\nexport async function loadAssessments() {\r\n    const user = getCurrentUser();\r\n    const container = document.getElementById('assessment-list');\r\n    const resultsCount = document.getElementById('resultsCount');\r\n\r\n    if (!container) return;\r\n\r\n    // 1. Show Loader using the correct CSS classes from results.css\r\n    container.innerHTML = `\r\n        <div class=\"loading-state-container\">\r\n            <div class=\"loading-spinner\"></div>\r\n            <p class=\"loading-text\">Loading AI tool database...</p>\r\n        </div>\r\n    `;\r\n    if (resultsCount) {\r\n        resultsCount.textContent = 'Loading assessments...';\r\n    }\r\n\r\n    if (!user) {\r\n        console.log('No user found, cannot load assessments.');\r\n        assessments = [];\r\n        renderAssessmentList();\r\n        renderRecentAssessments();\r\n        document.dispatchEvent(new Event('assessmentsUpdated'));\r\n        return;\r\n    }\r\n\r\n    try {\r\n        const query = supabase\r\n            .from('assessments')\r\n            .select('*')\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (!getIsAdmin()) {\r\n            query.eq('user_id', user.id);\r\n        }\r\n\r\n        const { data, error } = await query;\r\n\r\n        if (error) {\r\n            console.error('Supabase Query Error Details:', {\r\n                message: error.message,\r\n                code: error.code,\r\n                details: error.details,\r\n                hint: error.hint,\r\n                user_id: user.id,\r\n                is_admin: getIsAdmin()\r\n            });\r\n            throw error;\r\n        }\r\n\r\n        assessments = data || [];\r\n        console.log(`Loaded ${assessments.length} assessments`);\r\n        \r\n        renderAssessmentList();\r\n        renderRecentAssessments();\r\n        document.dispatchEvent(new Event('assessmentsUpdated'));\r\n        \r\n    } catch (error) {\r\n        console.error('Error loading assessments:', error);\r\n        assessments = [];\r\n        // Render error state\r\n        container.innerHTML = `\r\n            <div class=\"error-state-container\">\r\n                <i data-lucide=\"alert-triangle\" class=\"error-icon\"></i>\r\n                <h3 class=\"error-title\">Failed to Load Assessments</h3>\r\n                <p class=\"error-message\">Could not fetch the assessment data. Please try again later.</p>\r\n                <button onclick=\"loadAssessments()\" class=\"btn btn-secondary\">\r\n                    <i data-lucide=\"refresh-cw\" class=\"w-4 h-4 mr-2\"></i>\r\n                    Retry\r\n                </button>\r\n            </div>\r\n        `;\r\n        \r\n        // Reinitialize Lucide icons after dynamic content creation\r\n        if (typeof lucide !== 'undefined') {\r\n            setTimeout(() => lucide.createIcons(), 100);\r\n        }\r\n        if (resultsCount) {\r\n            resultsCount.textContent = 'Error loading assessments';\r\n        }\r\n    }\r\n}\r\n\r\nfunction renderRecentAssessments() {\r\n    const container = document.getElementById('assessmentsList');\r\n    if (!container) return;\r\n    \r\n    const recentAssessments = assessments.slice(0, 5);\r\n    \r\n    if (recentAssessments.length === 0) {\r\n        container.innerHTML = `\r\n            <div class=\"recent-assessments-empty\">\r\n                <p>No assessments yet</p>\r\n                <button class=\"btn btn-primary mt-2\" onclick=\"window.location.href='index.html'\">\r\n                    Create your first assessment \r\n                </button>\r\n            </div>\r\n        `;\r\n        return;\r\n    }\r\n    \r\n    const assessmentHTML = recentAssessments.map(assessment => {\r\n        const date = new Date(assessment.created_at).toLocaleDateString();\r\n        const formData = assessment.assessment_data?.formData || {};\r\n        const riskColors = {\r\n            low: 'bg-green-500',\r\n            medium: 'bg-yellow-500',\r\n            high: 'bg-orange-500', // Changed from red to orange\r\n            critical: 'bg-red-500' // Changed from purple to red\r\n        };\r\n        const riskColor = riskColors[assessment.risk_level?.toLowerCase()] || 'bg-gray-500';\r\n        const scoreColorClass = assessment.total_score >= 80 ? 'risk-critical' : // Aligned with AI_Risk_Framework.md Critical (80-100)\r\n                              assessment.total_score >= 60 ? 'risk-high' :    // Aligned with AI_Risk_Framework.md High (60-79)\r\n                              assessment.total_score >= 35 ? 'risk-medium' : // Aligned with AI_Risk_Framework.md Medium (35-59)\r\n                              'risk-low';                                 // Aligned with AI_Risk_Framework.md Low (0-34)\r\n        \r\n        const toolVersion = assessment.license_type ? assessment.license_type.charAt(0).toUpperCase() + assessment.license_type.slice(1) : '';\r\n        const fullToolName = toolVersion ? `${assessment.name} <span class=\"tool-title__license-type\">${toolVersion}</span>` : assessment.name;\r\n\r\n        return `\r\n            <div class=\"dashboard-summary-assessments__item\">\r\n                <div class=\"dashboard-summary-assessments__content\">\r\n                    <div class=\"dashboard-assessment-icon\">\r\n                        <i data-lucide=\"bot\" class=\"w-6 h-6 text-blue-400\"></i>\r\n                        <div class=\"dashboard-assessment-risk-indicator ${assessment.risk_level?.toLowerCase()}\"></div>\r\n                    </div>\r\n                    <div class=\"dashboard-summary-assessments__info\">\r\n                        <div class=\"dashboard-summary-assessments__name\">${fullToolName}</div>\r\n                        <div class=\"dashboard-summary-assessments__meta\">\r\n                            <span>${date}</span>\r\n                            <span class=\"dashboard-assessment-meta-divider\"></span>\r\n                            <span>by ${assessment.created_by || 'Anonymous'}</span>\r\n                            <span class=\"dashboard-assessment-meta-divider\"></span>\r\n                            <span>${formData.toolCategory || assessment.category || 'General'}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"flex items-center space-x-4\">\r\n                    <div class=\"dashboard-assessment-score\">\r\n                        <div class=\"score-value ${scoreColorClass}\">${assessment.total_score}</div>\r\n                        <div class=\"score-label\">Risk Score</div>\r\n                    </div>\r\n                    <div class=\"dashboard-assessment-actions\">\r\n                        <button onclick=\"viewAssessment('${assessment.id}')\" class=\"action-button\" title=\"View Details\">\r\n                            <i data-lucide=\"chevron-right\" class=\"w-5 h-5\"></i>\r\n                        </button>\r\n                        <button class=\"action-button\" title=\"Export PDF\">\r\n                            <i data-lucide=\"download\" class=\"w-5 h-5\"></i>\r\n                        </button>\r\n                        <button class=\"action-button\" title=\"Share\">\r\n                            <i data-lucide=\"share-2\" class=\"w-5 h-5\"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }).join('');\r\n    \r\n    container.innerHTML = assessmentHTML;\r\n    \r\n    // Reinitialize Lucide icons after dynamic content creation\r\n    if (typeof lucide !== 'undefined') {\r\n        setTimeout(() => lucide.createIcons(), 100);\r\n    }\r\n}\r\n\r\nfunction renderAssessmentList() {\r\n    const container = document.getElementById('assessment-list');\r\n    const resultsCount = document.getElementById('resultsCount');\r\n    if (!container) return;\r\n    container.innerHTML = '';\r\n    if (assessments.length === 0) {\r\n        container.innerHTML = `\r\n            <div class=\"empty-state\">\r\n                <h3>No assessments found</h3>\r\n                <p>Start by creating your first AI tool risk assessment.</p>\r\n                <a href=\"index.html\" class=\"btn btn-primary\">Create Assessment</a>\r\n            </div>\r\n        `;\r\n        if (resultsCount) {\r\n            resultsCount.textContent = '0 assessments found';\r\n        }\r\n        return;\r\n    }\r\n    const user = getCurrentUser();\r\n    const listContent = assessments.map(assessment => {\r\n        const date = new Date(assessment.created_at).toLocaleDateString();\r\n        const canDelete = getIsAdmin() || (user && assessment.user_id === user.id);\r\n        const isExpanded = expandedAssessmentId === assessment.id;\r\n        const formData = assessment.assessment_data?.formData || {};\r\n        const toolVersion = assessment.license_type ? assessment.license_type.charAt(0).toUpperCase() + assessment.license_type.slice(1) : '';\r\n        const fullToolName = toolVersion ? `${assessment.name} <span class=\"tool-title__license-type\">${toolVersion}</span>` : assessment.name;\r\n        return `\r\n            <div class=\"assessments-page__list-item assessments-page__list-item--clickable\" data-assessment-id=\"${assessment.id}\" onclick=\"toggleAssessmentDetails('${assessment.id}')\">\r\n                <div class=\"assessments-page__col assessments-page__col--tool\" data-label=\"Tool\">\r\n                    <button class=\"assessments-page__expand-btn\" aria-expanded=\"${isExpanded}\">\r\n                        <span class=\"chevron${isExpanded ? ' chevron--down' : ''}\"></span>\r\n                    </button>\r\n                    <div class=\"assessments-page__tool-info\">\r\n                        <h4>${fullToolName}</h4>\r\n                        <p>${formData.toolCategory || assessment.category || 'General'}</p>\r\n                    </div>\r\n                </div>\r\n                <div class=\"assessments-page__col assessments-page__col--score\" data-label=\"Score\">\r\n                    <span class=\"assessments-page__score-badge\">${assessment.total_score}/100</span>\r\n                </div>\r\n                <div class=\"assessments-page__col assessments-page__col--level\" data-label=\"Risk Level\">\r\n                    <span class=\"risk-badge risk-${assessment.risk_level}\">${assessment.risk_level?.toUpperCase()}</span>\r\n                </div>\r\n                <div class=\"assessments-page__col assessments-page__col--date\" data-label=\"Date\">\r\n                    <span>${date}</span>\r\n                </div>\r\n                <div class=\"assessments-page__col assessments-page__col--actions\" data-label=\"Actions\">\r\n                    ${canDelete ? `\r\n                        <button class=\"btn-icon\" title=\"Delete\" onclick=\"event.stopPropagation(); deleteAssessment('${assessment.id}')\">\r\n                            <i data-lucide=\"trash-2\" class=\"w-5 h-5\"></i>\r\n                        </button>\r\n                    ` : ''}\r\n                </div>\r\n            </div>\r\n            <div class=\"assessments-page__details-row\" style=\"display:${isExpanded ? 'block' : 'none'}\" id=\"details-${assessment.id}\">\r\n                <div class=\"assessments-page__details\">\r\n                    <div class=\"assessments-page__tabs\">\r\n                        <button class=\"assessments-page__tab assessments-page__tab--active\" data-tab=\"details\" data-assessment-id=\"${assessment.id}\">\r\n                            <i data-lucide=\"bar-chart-3\"></i>\r\n                            Risk Assessment Details\r\n                        </button>\r\n                        <button class=\"assessments-page__tab\" data-tab=\"recommendations\" data-assessment-id=\"${assessment.id}\">\r\n                            <i data-lucide=\"lightbulb\"></i>\r\n                            Recommendations\r\n                        </button>\r\n                        <button class=\"assessments-page__tab\" data-tab=\"compliance\" data-assessment-id=\"${assessment.id}\">\r\n                            <i data-lucide=\"shield-check\"></i>\r\n                            Compliance Status\r\n                        </button>\r\n                    </div>\r\n                    \r\n                    <div class=\"assessments-page__tab-content assessments-page__tab-content--active\" data-content=\"details\">\r\n                        <div class=\"assessments-page__details-grid\">\r\n                            ${renderAssessmentDetailsContent(assessment)}\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class=\"assessments-page__tab-content\" data-content=\"recommendations\">\r\n                        <div class=\"assessments-page__recommendations-list\">\r\n                            ${renderAssessmentRecommendations(assessment)}\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class=\"assessments-page__tab-content\" data-content=\"compliance\">\r\n                        <div class=\"assessments-page__compliance-content\">\r\n                            ${renderAssessmentCompliance(assessment)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }).join('');\r\n    container.innerHTML = listContent;\r\n    \r\n    // Add tab switching functionality\r\n    container.querySelectorAll('.assessments-page__tab').forEach(tab => {\r\n        tab.addEventListener('click', e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            \r\n            const targetTab = tab.getAttribute('data-tab');\r\n            const assessmentId = tab.getAttribute('data-assessment-id');\r\n            \r\n            // Find the parent details container\r\n            const detailsContainer = tab.closest('.assessments-page__details');\r\n            \r\n            // Remove active class from all tabs and content in this assessment's details\r\n            detailsContainer.querySelectorAll('.assessments-page__tab').forEach(t => t.classList.remove('assessments-page__tab--active'));\r\n            detailsContainer.querySelectorAll('.assessments-page__tab-content').forEach(c => c.classList.remove('assessments-page__tab-content--active'));\r\n            \r\n            // Add active class to clicked tab and corresponding content\r\n            tab.classList.add('assessments-page__tab--active');\r\n            detailsContainer.querySelector(`[data-content=\"${targetTab}\"]`).classList.add('assessments-page__tab-content--active');\r\n        });\r\n    });\r\n    \r\n    if (typeof lucide !== 'undefined') {\r\n        setTimeout(() => lucide.createIcons(), 100);\r\n    }\r\n    if (resultsCount) {\r\n        resultsCount.textContent = `${assessments.length} assessments found`;\r\n    }\r\n}\r\n\r\nwindow.toggleAssessmentDetails = function(id) {\r\n    expandedAssessmentId = expandedAssessmentId === id ? null : id;\r\n    renderAssessmentList();\r\n};\r\n\r\nfunction renderAssessmentDetailsContent(assessment) {\r\n    const data = assessment.assessment_data || {};\r\n    // Handle both camelCase and snake_case for detailed assessment object\r\n    const detailedAssessment = data.detailedAssessment || data.detailed_assessment || data.results?.detailed_assessment || {};\r\n    \r\n    // Extract data exactly like compare.js does\r\n    const detailsHTML = Object.entries(detailedAssessment.assessment_details || {}).map(([key, detail]) => {\r\n        const categoryScore = detail.category_score || 0;\r\n        return `\r\n            <div class=\"assessments-page__detail-card\">\r\n                <h5 class=\"assessments-page__detail-title\">${key.replace(/_/g, ' ').replace(/\\b\\w/g, char => char.toUpperCase())}</h5>\r\n                <div class=\"assessments-page__detail-score\">Score: ${categoryScore}</div>\r\n                <div class=\"assessments-page__detail-content\">\r\n                    ${Object.entries(detail.criteria || {}).map(([critKey, crit]) => `\r\n                        <div class=\"assessments-page__detail-item\">\r\n                            <strong>${critKey.replace(/_/g, ' ').replace(/\\b\\w/g, char => char.toUpperCase())}:</strong> ${crit.score} - ${crit.justification}\r\n                        </div>\r\n                    `).join('')}\r\n                </div>\r\n            </div>\r\n        `;\r\n    }).join('') || '<p>No detailed assessment available</p>';\r\n    \r\n    return detailsHTML;\r\n}\r\n\r\nfunction renderAssessmentRecommendations(assessment) {\r\n    const data = assessment.assessment_data || {};\r\n    // Access recommendations from multiple possible paths like compare.js does\r\n    const recommendations = data.recommendations || assessment.recommendations || data.results?.recommendations || [];\r\n    \r\n    const recs = recommendations.map(r => `\r\n        <div class=\"assessments-page__recommendation\">\r\n            <div class=\"assessments-page__rec-bullet assessments-page__rec-priority--${r.priority}\"></div>\r\n            <div>\r\n                <h5 class=\"assessments-page__rec-title\">${r.title}</h5>\r\n                <p class=\"assessments-page__rec-desc\">${r.description}</p>\r\n                <span class=\"assessments-page__rec-meta\">Priority: ${r.priority} | Category: ${r.category}</span>\r\n            </div>\r\n        </div>\r\n    `).join('') || '<p>No recommendations available</p>';\r\n    \r\n    return recs;\r\n}\r\n\r\nfunction renderAssessmentCompliance(assessment) {\r\n    try {\r\n        console.log('Rendering Compliance for Assessment:', assessment);\r\n\r\n        const data = assessment.assessment_data || {};\r\n        const formData = data.formData || {};\r\n        const detailedAssessment = data.detailed_assessment || data.results?.detailed_assessment || {};\r\n        \r\n        // Access compliance data from multiple possible paths\r\n        const complianceData = assessment.compliance || data.compliance || {}; // Keep for fallback/other uses if needed\r\n        const complianceCertificationsObject = assessment.compliance_certifications || data.compliance_certifications || {};\r\n        \r\n        console.log('Compliance Data:', {\r\n            complianceData,\r\n            complianceCertificationsObject,\r\n            assessmentData: data\r\n        });\r\n\r\n        let certificationsHtml = '';\r\n\r\n        if (complianceCertificationsObject && typeof complianceCertificationsObject === 'object') {\r\n            const certEntries = Object.entries(complianceCertificationsObject);\r\n\r\n            if (certEntries.length > 0) {\r\n                certificationsHtml = certEntries.map(([certName, certDetails]) => {\r\n                    const status = certDetails.status || 'N/A';\r\n                    const details = certDetails.details || 'No details provided.';\r\n                    const evidence = certDetails.evidence || 'No evidence provided.';\r\n                    const limitations = certDetails.limitations || 'None';\r\n                    const lastVerified = certDetails.last_verified || 'N/A';\r\n\r\n                    let statusIcon = '';\r\n                    let statusClass = '';\r\n\r\n                    switch (status.toLowerCase()) {\r\n                        case 'compliant':\r\n                        case 'type ii': // Assuming Type II is a compliant status\r\n                            statusIcon = '<i data-lucide=\"check-circle\" class=\"assessments-page__compliance-icon assessments-page__compliance-icon--compliant\"></i>';\r\n                            statusClass = '--compliant';\r\n                            break;\r\n                        case 'conditionally compliant':\r\n                            statusIcon = '<i data-lucide=\"alert-triangle\" class=\"assessments-page__compliance-icon assessments-page__compliance-icon--conditional\"></i>';\r\n                            statusClass = '--conditional';\r\n                            break;\r\n                        case 'no':\r\n                            statusIcon = '<i data-lucide=\"x-circle\" class=\"assessments-page__compliance-icon assessments-page__compliance-icon--noncompliant\"></i>';\r\n                            statusClass = '--noncompliant';\r\n                            break;\r\n                        case 'not applicable':\r\n                            statusIcon = '<i data-lucide=\"info\" class=\"assessments-page__compliance-icon assessments-page__compliance-icon--na\"></i>';\r\n                            statusClass = '--na';\r\n                            break;\r\n                        default:\r\n                            statusIcon = '<i data-lucide=\"help-circle\" class=\"assessments-page__compliance-icon\"></i>';\r\n                            break;\r\n                    }\r\n\r\n                    return `\r\n                        <div class=\"assessments-page__compliance-card\">\r\n                            <div class=\"assessments-page__compliance-card-header\">\r\n                                ${statusIcon}\r\n                                <h5 class=\"assessments-page__compliance-card-title\">${certName.toUpperCase()}</h5>\r\n                                <span class=\"assessments-page__compliance-card-status assessments-page__compliance-card-status${statusClass}\">${status}</span>\r\n                            </div>\r\n                            <div class=\"assessments-page__compliance-card-body\">\r\n                                <p><strong>Details:</strong> ${details}</p>\r\n                                <p><strong>Evidence:</strong> ${evidence}</p>\r\n                                <p><strong>Limitations:</strong> ${limitations}</p>\r\n                                <p><strong>Last Verified:</strong> ${lastVerified}</p>\r\n                            </div>\r\n                        </div>\r\n                    `;\r\n                }).join('');\r\n            }\r\n        }\r\n\r\n        // Fallback if no detailed certifications object\r\n        if (!certificationsHtml) {\r\n            certificationsHtml = '<p>No detailed compliance data available.</p>';\r\n        }\r\n\r\n        // Explicitly get compliance_summary from the correct nested path\r\n        const complianceSummary = assessment.assessment_data?.detailedAssessment?.compliance_summary || 'No compliance summary available';\r\n        \r\n        return `\r\n            <div class=\"assessments-page__compliance-grid\">\r\n                ${certificationsHtml}\r\n            </div>\r\n            <div class=\"assessments-page__compliance-summary\">\r\n                <p><strong>Documentation Tier:</strong> ${assessment.documentation_tier || 'Not specified'}</p>\r\n                <p><strong>Use Case:</strong> ${formData.useCase || assessment.primary_use_case || 'Not specified'}</p>\r\n                <p><strong>Summary:</strong> ${complianceSummary}</p>\r\n            </div>\r\n        `;\r\n    } catch (error) {\r\n        console.error('Error in renderAssessmentCompliance:', error);\r\n        return `\r\n            <div class=\"assessments-page__compliance-error\">\r\n                <p>Error rendering compliance information</p>\r\n                <pre>${JSON.stringify(error, null, 2)}</pre>\r\n            </div>\r\n        `;\r\n    }\r\n}\r\n\r\nfunction renderAssessmentDetails(assessment) {\r\n    const data = assessment.assessment_data || {};\r\n    const detailedAssessment = data.detailed_assessment || data.results?.detailed_assessment || {};\r\n    const recommendations = data.recommendations || data.results?.recommendations || [];\r\n    const formData = data.formData || {};\r\n\r\n    const renderCategory = (category) => {\r\n        const title = category.category || 'Unknown Category';\r\n        const score = category.score;\r\n        const metrics = category.metrics || [];\r\n        \r\n        return `\r\n            <div class=\"assessment-details__category\">\r\n                <div class=\"assessment-details__category-header\">\r\n                    <h4 class=\"assessment-details__category-title\">${title}</h4>\r\n                    <span class=\"assessment-details__category-score score--${getRiskLevelClass(score)}\">${score}/100</span>\r\n                </div>\r\n                <div class=\"assessment-details__metrics-grid\">\r\n                    ${metrics.map(metric => `\r\n                        <div class=\"assessment-details__metric\">\r\n                            <div class=\"assessment-details__metric-name\">${metric.name}</div>\r\n                            <div class=\"assessment-details__metric-value\">${metric.value}</div>\r\n                            <div class=\"assessment-details__metric-note\">${metric.note}</div>\r\n                        </div>\r\n                    `).join('')}\r\n                </div>\r\n            </div>\r\n        `;\r\n    };\r\n\r\n    return `\r\n        <div class=\"assessment-details__container\">\r\n            <div class=\"assessment-details__sidebar\">\r\n                <div class=\"assessment-details__meta\">\r\n                    <h3 class=\"assessment-details__meta-title\">Assessment Info</h3>\r\n                    <div class=\"assessment-details__meta-item\">\r\n                        <i data-lucide=\"tag\" class=\"assessment-details__meta-icon\"></i>\r\n                        <span><strong>Tool Version:</strong> ${formData.toolVersion || 'N/A'}</span>\r\n                    </div>\r\n                    <div class=\"assessment-details__meta-item\">\r\n                        <i data-lucide=\"layout-grid\" class=\"assessment-details__meta-icon\"></i>\r\n                        <span><strong>Category:</strong> ${formData.toolCategory || 'N/A'}</span>\r\n                    </div>\r\n                    <div class=\"assessment-details__meta-item\">\r\n                        <i data-lucide=\"briefcase\" class=\"assessment-details__meta-icon\"></i>\r\n                        <span><strong>Use Case:</strong> ${formData.useCase || 'N/A'}</span>\r\n                    </div>\r\n                    <div class=\"assessment-details__meta-item\">\r\n                        <i data-lucide=\"shield\" class=\"assessment-details__meta-icon\"></i>\r\n                        <span><strong>Data Classification:</strong> ${formData.dataClassification || 'N/A'}</span>\r\n                    </div>\r\n                </div>\r\n                 <a href=\"assessment-detail.html?id=${assessment.id}\" class=\"btn btn-primary assessment-details__full-report-btn\">\r\n                    View Full Report\r\n                    <i data-lucide=\"arrow-right\" class=\"w-4 h-4 ml-2\"></i>\r\n                </a>\r\n            </div>\r\n            <div class=\"assessment-details__main\">\r\n                <div class=\"assessment-details__tabs\">\r\n                    <button class=\"assessment-details__tab active\" data-tab=\"breakdown\">Detailed Breakdown</button>\r\n                    <button class=\"assessment-details__tab\" data-tab=\"recommendations\">Recommendations</button>\r\n                </div>\r\n                <div class=\"assessment-details__tab-content active\" id=\"tab-breakdown\">\r\n                    ${(detailedAssessment.categories || []).map(renderCategory).join('')}\r\n                </div>\r\n                <div class=\"assessment-details__tab-content\" id=\"tab-recommendations\">\r\n                    <ul class=\"assessment-details__recommendations-list\">\r\n                        ${recommendations.map(rec => `\r\n                            <li class=\"assessment-details__recommendation-item\">\r\n                                <i data-lucide=\"check-circle\" class=\"assessment-details__rec-icon\"></i>\r\n                                <div>\r\n                                    <h5 class=\"assessment-details__rec-title\">${rec.title}</h5>\r\n                                    <p class=\"assessment-details__rec-desc\">${rec.description}</p>\r\n                                </div>\r\n                            </li>\r\n                        `).join('')}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `;\r\n}\r\n\r\nexport function viewAssessment(id) {\r\n    window.location.href = `assessment-detail.html?id=${id}`;\r\n}\r\n\r\nexport async function deleteAssessment(id) {\r\n    const user = getCurrentUser();\r\n    if (!user) {\r\n        alert('You must be logged in to delete assessments.');\r\n        return;\r\n    }\r\n    // Find the assessment to check ownership\r\n    const assessment = assessments.find(a => a.id === id);\r\n    if (!assessment) {\r\n        alert('Assessment not found.');\r\n        return;\r\n    }\r\n    // Allow if admin or owner\r\n    if (!getIsAdmin() && assessment.user_id !== user.id) {\r\n        alert('Access denied. You can only delete your own assessments.');\r\n        return;\r\n    }\r\n    if (!confirm('Are you sure you want to delete this assessment? This action cannot be undone.')) {\r\n        return;\r\n    }\r\n    try {\r\n        const { error } = await supabase\r\n            .from('assessments')\r\n            .delete()\r\n            .eq('id', id);\r\n        if (error) throw error;\r\n        loadAssessments();\r\n        // Optionally, show a success message\r\n        // showToast('Assessment deleted successfully.');\r\n    } catch (error) {\r\n        console.error('Error deleting assessment:', error);\r\n        // showToast('Error deleting assessment.', 'error');\r\n    }\r\n}\r\n\r\nexport function filterAssessmentsLegacy() {\r\n    // Legacy filter function - kept for backward compatibility\r\n    // This uses old element IDs like searchInput, riskFilter, categoryFilter\r\n    const searchTerm = document.getElementById('searchInput')?.value.toLowerCase() || '';\r\n    const riskFilter = document.getElementById('riskFilter')?.value || 'all';\r\n    const categoryFilter = document.getElementById('categoryFilter')?.value || 'all';\r\n    const sortBy = document.getElementById('sortSelect')?.value || 'date_desc';\r\n    \r\n    let filteredAssessments = [...assessments];\r\n    \r\n    if (searchTerm) {\r\n        filteredAssessments = filteredAssessments.filter(a => a.name.toLowerCase().includes(searchTerm));\r\n    }\r\n    \r\n    if (riskFilter !== 'all') {\r\n        filteredAssessments = filteredAssessments.filter(a => a.risk_level === riskFilter);\r\n    }\r\n    \r\n    if (categoryFilter !== 'all') {\r\n        filteredAssessments = filteredAssessments.filter(a => a.category === categoryFilter);\r\n    }\r\n    \r\n    filteredAssessments.sort((a, b) => {\r\n        switch (sortBy) {\r\n            case 'date_asc': return new Date(a.created_at) - new Date(b.created_at);\r\n            case 'date_desc': return new Date(b.created_at) - new Date(a.created_at);\r\n            case 'score_asc': return (a.total_score || 0) - (b.total_score || 0);\r\n            case 'score_desc': return (b.total_score || 0) - (a.total_score || 0);\r\n            case 'name_asc': return a.name.localeCompare(b.name);\r\n            case 'name_desc': return b.name.localeCompare(a.name);\r\n            default: return 0;\r\n        }\r\n    });\r\n    \r\n    renderFilteredAssessments(filteredAssessments);\r\n    \r\n    const resultsCount = document.getElementById('resultsCount');\r\n    if (resultsCount) {\r\n        resultsCount.textContent = `${filteredAssessments.length} assessments found`;\r\n    }\r\n    \r\n    const clearFiltersBtn = document.getElementById('clearFilters');\r\n    if (clearFiltersBtn) {\r\n        const hasFilters = searchTerm || riskFilter !== 'all' || categoryFilter !== 'all' || sortBy !== 'date_desc';\r\n        clearFiltersBtn.style.display = hasFilters ? 'inline-block' : 'none';\r\n    }\r\n}\r\n\r\n// New filter function that works with the BEM-based multi-select filters\r\nexport function filterAssessments(filters = {}) {\r\n    const { \r\n        searchTerm = '', \r\n        riskLevels = [], \r\n        categories = [], \r\n        dateRanges = [],\r\n        sortBy = 'date_desc'\r\n    } = filters;\r\n    \r\n    let filteredAssessments = [...assessments];\r\n    \r\n    // Apply search filter\r\n    if (searchTerm) {\r\n        filteredAssessments = filteredAssessments.filter(a => \r\n            a.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            (a.category && a.category.toLowerCase().includes(searchTerm.toLowerCase()))\r\n        );\r\n    }\r\n    \r\n    // Apply risk level filter\r\n    if (riskLevels.length > 0) {\r\n        filteredAssessments = filteredAssessments.filter(a => \r\n            riskLevels.includes(a.risk_level)\r\n        );\r\n    }\r\n    \r\n    // Apply category filter\r\n    if (categories.length > 0) {\r\n        filteredAssessments = filteredAssessments.filter(a => {\r\n            const category = a.category?.toLowerCase() || '';\r\n            return categories.some(cat => {\r\n                switch (cat) {\r\n                    case 'conversational': return category.includes('conversational') || category.includes('chat');\r\n                    case 'image': return category.includes('image') || category.includes('visual');\r\n                    case 'code': return category.includes('code') || category.includes('development');\r\n                    case 'data': return category.includes('data') || category.includes('analysis');\r\n                    default: return category.includes(cat);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    \r\n    // Apply date range filter\r\n    if (dateRanges.length > 0) {\r\n        const now = new Date();\r\n        filteredAssessments = filteredAssessments.filter(a => {\r\n            const assessmentDate = new Date(a.created_at);\r\n            return dateRanges.some(range => {\r\n                switch (range) {\r\n                    case 'today':\r\n                        return assessmentDate.toDateString() === now.toDateString();\r\n                    case 'week':\r\n                        const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n                        return assessmentDate >= weekAgo;\r\n                    case 'month':\r\n                        const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\r\n                        return assessmentDate >= monthAgo;\r\n                    case 'year':\r\n                        const yearAgo = new Date(now.getTime() - 365 * 24 * 60 * 60 * 1000);\r\n                        return assessmentDate >= yearAgo;\r\n                    default:\r\n                        return true;\r\n                }\r\n            });\r\n        });\r\n    }\r\n    \r\n    // Apply sorting\r\n    filteredAssessments.sort((a, b) => {\r\n        switch (sortBy) {\r\n            case 'newest':\r\n            case 'date_desc': \r\n                return new Date(b.created_at) - new Date(a.created_at);\r\n            case 'oldest':\r\n            case 'date_asc': \r\n                return new Date(a.created_at) - new Date(b.created_at);\r\n            case 'risk-high':\r\n            case 'score_desc': \r\n                return (b.total_score || 0) - (a.total_score || 0);\r\n            case 'risk-low':\r\n            case 'score_asc': \r\n                return (a.total_score || 0) - (b.total_score || 0);\r\n            case 'name-az':\r\n            case 'name_asc': \r\n                return a.name.localeCompare(b.name);\r\n            case 'name-za':\r\n            case 'name_desc': \r\n                return b.name.localeCompare(a.name);\r\n            default: \r\n                return new Date(b.created_at) - new Date(a.created_at);\r\n        }\r\n    });\r\n    \r\n    renderFilteredAssessments(filteredAssessments);\r\n    return filteredAssessments;\r\n}\r\n\r\nexport function clearAllFiltersLegacy() {\r\n    // Legacy clear function - kept for backward compatibility\r\n    const searchInput = document.getElementById('searchInput');\r\n    const riskFilter = document.getElementById('riskFilter');\r\n    const categoryFilter = document.getElementById('categoryFilter');\r\n    const sortSelect = document.getElementById('sortSelect');\r\n    \r\n    if (searchInput) searchInput.value = '';\r\n    if (riskFilter) riskFilter.value = 'all';\r\n    if (categoryFilter) categoryFilter.value = 'all';\r\n    if (sortSelect) sortSelect.value = 'date_desc';\r\n    \r\n    filterAssessmentsLegacy();\r\n}\r\n\r\n// Export for backward compatibility\r\nexport const clearAllFilters = clearAllFiltersLegacy;\r\n\r\nfunction renderAssessmentItem(assessment) {\r\n    const riskLevelClass = getRiskLevelClass(assessment.total_score);\r\n    const riskLevelText = getRiskLevelText(assessment.total_score);\r\n\r\n    const toolVersion = assessment.license_type ? assessment.license_type.charAt(0).toUpperCase() + assessment.license_type.slice(1) : '';\r\n    const fullToolName = toolVersion ? `${assessment.name} <span class=\"tool-title__license-type\">${toolVersion}</span>` : assessment.name;\r\n    \r\n    return `\r\n        <div class=\"dashboard-summary-assessments__item\">\r\n            <div class=\"dashboard-summary-assessments__item-content\">\r\n                <div class=\"dashboard-summary-assessments__item-icon\">\r\n                    <i data-lucide=\"${getToolIcon(assessment.category)}\" class=\"w-5 h-5\"></i>\r\n                </div>\r\n                <div class=\"dashboard-summary-assessments__item-info\">\r\n                    <h3 class=\"dashboard-summary-assessments__item-name\">${fullToolName}</h3>\r\n                    <p class=\"dashboard-summary-assessments__item-category\">${assessment.category || 'General'}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"dashboard-summary-assessments__item-meta\">\r\n                <span class=\"dashboard-summary-assessments__item-risk risk-${riskLevelClass.toLowerCase()}\">${riskLevelText}</span>\r\n                <span class=\"dashboard-summary-assessments__item-score\">${assessment.total_score}/100</span>\r\n                <span class=\"dashboard-summary-assessments__item-date\">${formatDate(assessment.created_at)}</span>\r\n                <button class=\"dashboard-summary-assessments__item-action\" onclick=\"viewAssessment('${assessment.id}')\" aria-label=\"View Details\">\r\n                    <i data-lucide=\"eye\" class=\"w-4 h-4\"></i>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    `;\r\n}\r\n\r\nfunction getToolIcon(category) {\r\n    const icons = {\r\n        'Content Generation': 'pen-tool',\r\n        'Code Analysis': 'code',\r\n        'Development': 'laptop',\r\n        'Image Generation': 'image',\r\n        'Productivity': 'check-square',\r\n        'default': 'bot'\r\n    };\r\n    return icons[category] || icons.default;\r\n}\r\n\r\nfunction getRiskLevelClass(score) {\r\n    if (score >= 80) return 'low';\r\n    if (score >= 60) return 'medium';\r\n    if (score >= 40) return 'high';\r\n    return 'critical';\r\n}\r\n\r\nfunction getRiskLevelText(score) {\r\n    if (score >= 80) return 'Low Risk';\r\n    if (score >= 60) return 'Medium Risk';\r\n    if (score >= 40) return 'High Risk';\r\n    return 'Critical Risk';\r\n}\r\n\r\nfunction formatDate(dateString) {\r\n    const date = new Date(dateString);\r\n    return date.toISOString().split('T')[0];\r\n}\r\n\r\n// Update the assessment list\r\nfunction updateAssessmentsList(assessments) {\r\n    const container = document.getElementById('assessmentsList');\r\n    if (!container) return;\r\n    \r\n    // Sort by date descending and take the 5 most recent\r\n    const recentAssessments = assessments\r\n        .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))\r\n        .slice(0, 5);\r\n    \r\n    container.innerHTML = recentAssessments\r\n        .map(assessment => renderAssessmentItem(assessment))\r\n        .join('');\r\n}\r\n\r\nfunction renderFilteredAssessments(filteredData) {\r\n    const container = document.getElementById('assessment-list') || document.querySelector('.assessment-grid');\r\n    const resultsCount = document.getElementById('resultsCount') || document.querySelector('.dashboard-controls__results-count');\r\n    \r\n    if (!container) return;\r\n    \r\n    container.innerHTML = '';\r\n    \r\n    if (filteredData.length === 0) {\r\n        container.innerHTML = `\r\n            <div class=\"empty-state\">\r\n                <h3>No matching assessments found</h3>\r\n                <p>Try adjusting your filters or search terms.</p>\r\n                <button onclick=\"clearAllFiltersLegacy()\" class=\"btn btn-secondary\">Clear Filters</button>\r\n            </div>\r\n        `;\r\n    } else {\r\n        const user = getCurrentUser && getCurrentUser();\r\n        const listContent = filteredData.map(assessment => {\r\n            const date = new Date(assessment.created_at).toLocaleDateString();\r\n            const canDelete = (typeof getIsAdmin === 'function' && getIsAdmin()) || (user && assessment.user_id === user.id);\r\n            const isExpanded = typeof expandedAssessmentId !== 'undefined' && expandedAssessmentId === assessment.id;\r\n            const formData = assessment.assessment_data?.formData || {};\r\n            const toolVersion = assessment.license_type ? assessment.license_type.charAt(0).toUpperCase() + assessment.license_type.slice(1) : '';\r\n            const fullToolName = toolVersion ? `${assessment.name} <span class=\"tool-title__license-type\">${toolVersion}</span>` : assessment.name;\r\n            \r\n            // Check if we're rendering for the new dashboard grid or old list\r\n            if (container.classList.contains('assessment-grid')) {\r\n                // New dashboard grid format\r\n                return `\r\n                    <div class=\"assessment-item\" data-risk=\"${assessment.risk_level}\" data-category=\"${(assessment.category || '').toLowerCase()}\" data-assessment-id=\"${assessment.id}\">\r\n                        <div class=\"assessment-item__header\">\r\n                            <h3 class=\"assessment-item__title\">${assessment.name}</h3>\r\n                            <span class=\"assessment-item__risk risk-${assessment.risk_level}\">${assessment.risk_level?.toUpperCase()}</span>\r\n                        </div>\r\n                        <div class=\"assessment-item__content\">\r\n                            <p class=\"assessment-item__description\">${formData.toolDescription || assessment.description || 'AI risk assessment tool.'}</p>\r\n                            <div class=\"assessment-item__meta\">\r\n                                <span class=\"assessment-item__date\">${date}</span>\r\n                                <span class=\"assessment-item__category\">${formData.toolCategory || assessment.category || 'General'}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"assessment-item__actions\">\r\n                            <button class=\"btn btn-sm\" onclick=\"viewAssessment('${assessment.id}')\">View Details</button>\r\n                            <button class=\"btn btn-sm btn-outline\">Export</button>\r\n                        </div>\r\n                    </div>\r\n                `;\r\n            } else {\r\n                // Legacy list format\r\n                return `\r\n                    <div class=\"assessments-page__list-item\" data-assessment-id=\"${assessment.id}\">\r\n                        <div class=\"assessments-page__col assessments-page__col--tool\" data-label=\"Tool\">\r\n                            <div class=\"assessments-page__tool-info\">\r\n                                <h4>${fullToolName}</h4>\r\n                                <p>${formData.toolCategory || assessment.category || 'General'}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"assessments-page__col assessments-page__col--score\" data-label=\"Score\">\r\n                            <span class=\"assessments-page__score-badge\">${assessment.total_score}/100</span>\r\n                        </div>\r\n                        <div class=\"assessments-page__col assessments-page__col--level\" data-label=\"Risk Level\">\r\n                            <span class=\"risk-badge risk-${assessment.risk_level}\">${assessment.risk_level?.toUpperCase()}</span>\r\n                        </div>\r\n                        <div class=\"assessments-page__col assessments-page__col--date\" data-label=\"Date\">\r\n                            <span>${date}</span>\r\n                        </div>\r\n                        <div class=\"assessments-page__col assessments-page__col--actions\" data-label=\"Actions\">\r\n                            <button class=\"btn-icon\" title=\"View Details\" aria-expanded=\"${isExpanded}\" aria-controls=\"details-${assessment.id}\" onclick=\"toggleAssessmentDetails('${assessment.id}')\">\r\n                                <i data-lucide=\"eye\" class=\"w-5 h-5\"></i>\r\n                            </button>\r\n                            ${canDelete ? `\r\n                                <button class=\"btn-icon\" title=\"Delete\" onclick=\"deleteAssessment('${assessment.id}')\">\r\n                                    <i data-lucide=\"trash-2\" class=\"w-5 h-5\"></i>\r\n                                </button>\r\n                            ` : ''}\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"assessments-page__details${isExpanded ? ' assessments-page__details--expanded' : ''}\" id=\"details-${assessment.id}\" style=\"display:${isExpanded ? 'block' : 'none'}\" role=\"region\" aria-hidden=\"${!isExpanded}\">\r\n                        ${isExpanded ? renderAssessmentDetails(assessment) : ''}\r\n                    </div>\r\n                `;\r\n            }\r\n        }).join('');\r\n        \r\n        container.innerHTML = listContent;\r\n        \r\n        if (typeof lucide !== 'undefined') {\r\n            setTimeout(() => lucide.createIcons(), 100);\r\n        }\r\n    }\r\n    \r\n    if (resultsCount) {\r\n        resultsCount.textContent = `${filteredData.length} of ${assessments.length} assessments shown`;\r\n    }\r\n    \r\n    // Re-initialize any dynamic components like tooltips if needed\r\n}\r\n\r\n// Initialize event listeners\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    // Search button handler\r\n    const searchButton = document.getElementById('searchButton');\r\n    if (searchButton) {\r\n        searchButton.addEventListener('click', () => {\r\n            // Implement search functionality\r\n        });\r\n    }\r\n\r\n    // Filter button handler\r\n    const filterButton = document.getElementById('filterButton');\r\n    if (filterButton) {\r\n        filterButton.addEventListener('click', () => {\r\n            // Implement filter functionality\r\n        });\r\n    }\r\n});","// js/dashboard/gamification.js\r\n// Handles all gamification features, such as achievements,\r\n// progress tracking, and rewards. \r\n\r\nimport { getAssessments } from './assessments.js';\r\n\r\nexport function updateDashboardStats() {\r\n    const assessments = getAssessments();\r\n    const totalCount = assessments.length;\r\n    const highRiskCount = assessments.filter(a => a.risk_level === 'high' || a.risk_level === 'critical').length;\r\n    const lowRiskCount = assessments.filter(a => a.risk_level === 'low').length;\r\n    const avgScore = totalCount > 0 ? Math.round(assessments.reduce((sum, a) => sum + (a.total_score || 0), 0) / totalCount) : 0;\r\n    \r\n    // Update stat cards\r\n    const totalEl = document.getElementById('totalAssessments');\r\n    const highEl = document.getElementById('highRiskCount');\r\n    const lowEl = document.getElementById('lowRiskCount');\r\n    const avgEl = document.getElementById('avgScore');\r\n    const badgeEl = document.getElementById('assessmentBadge');\r\n    const remainingEl = document.getElementById('remainingText');\r\n    \r\n    if (totalEl) totalEl.textContent = totalCount;\r\n    if (highEl) highEl.textContent = highRiskCount;\r\n    if (lowEl) lowEl.textContent = lowRiskCount;\r\n    if (avgEl) avgEl.textContent = avgScore;\r\n    if (badgeEl) badgeEl.textContent = totalCount;\r\n    \r\n    // Update remaining text\r\n    const remaining = Math.max(0, 25 - totalCount);\r\n    if (remainingEl) remainingEl.textContent = `${remaining} remaining in free tier`;\r\n}\r\n\r\nexport function updateProgressTracking() {\r\n    const totalCount = getAssessments().length;\r\n    const limit = 25; // Free tier limit\r\n    const percentage = Math.min((totalCount / limit) * 100, 100);\r\n    \r\n    // Update progress bar\r\n    const progressBar = document.getElementById('progressBar');\r\n    const progressText = document.getElementById('assessmentProgress');\r\n    const remainingText = document.getElementById('remainingCount');\r\n    \r\n    if (progressBar) progressBar.style.width = `${percentage}%`;\r\n    if (progressText) progressText.textContent = `${totalCount}/${limit}`;\r\n    if (remainingText) remainingText.textContent = `${Math.max(0, limit - totalCount)} assessments remaining`;\r\n}\r\n\r\n/*\r\nexport function loadAchievements() {\r\n    const totalCount = getAssessments().length;\r\n    const achievements = [\r\n        {\r\n            id: 'first-assessment',\r\n            name: 'First Steps',\r\n            description: 'Complete your first risk assessment',\r\n            icon: '',\r\n            unlocked: totalCount >= 1,\r\n            progress: Math.min(totalCount, 1),\r\n            requirement: 1\r\n        },\r\n        {\r\n            id: 'power-user',\r\n            name: 'Power User',\r\n            description: 'Complete 25 risk assessments',\r\n            icon: '',\r\n            unlocked: totalCount >= 25,\r\n            progress: Math.min(totalCount, 25),\r\n            requirement: 25\r\n        },\r\n        {\r\n            id: 'risk-expert',\r\n            name: 'Risk Expert',\r\n            description: 'Complete 50 risk assessments',\r\n            icon: '',\r\n            unlocked: totalCount >= 50,\r\n            progress: Math.min(totalCount, 50),\r\n            requirement: 50\r\n        }\r\n    ];\r\n    \r\n    renderAchievements(achievements);\r\n}\r\n\r\nfunction renderAchievements(achievements) {\r\n    const container = document.getElementById('achievementsList');\r\n    if (!container) return;\r\n    \r\n    container.innerHTML = achievements.map(achievement => {\r\n        const progressPercent = (achievement.progress / achievement.requirement) * 100;\r\n        const statusClass = achievement.unlocked ? 'unlocked' : 'in-progress';\r\n        \r\n        return `\r\n            <div class=\"achievement-card ${statusClass}\">\r\n                <div class=\"flex items-center justify-between mb-2\">\r\n                    <div class=\"flex items-center space-x-2\">\r\n                        <span class=\"text-lg\">${achievement.icon}</span>\r\n                        <h4 class=\"font-medium\">${achievement.name}</h4>\r\n                    </div>\r\n                    ${achievement.unlocked ? '<span class=\"text-xs text-green-400\"> Unlocked</span>' : ''}\r\n                </div>\r\n                <p class=\"text-sm text-gray-400 mb-2\">${achievement.description}</p>\r\n                ${!achievement.unlocked ? `\r\n                    <div class=\"achievement-progress-bar\">\r\n                        <div class=\"achievement-progress-fill\" style=\"width: ${progressPercent}%\"></div>\r\n                    </div>\r\n                    <span class=\"text-xs text-gray-400\">${achievement.progress}/${achievement.requirement}</span>\r\n                ` : ''}\r\n            </div>\r\n        `;\r\n    }).join('');\r\n}\r\n*/ ","// js/dashboard/import.js\r\n// Manages the file import functionality, including drag-and-drop\r\n// and processing uploaded files.\r\nimport { getIsAdmin } from './auth.js';\r\nimport { loadAssessments } from './assessments.js';\r\nimport { updateDashboardStats, updateProgressTracking } from './gamification.js';\r\nimport { switchTab } from './ui.js';\r\n\r\nlet supabaseClient = null;\r\nconst SUPABASE_URL = \"https://lgybmsziqjdmmxdiyils.supabase.co\";\r\n\r\nexport function initImport(client) {\r\n    supabaseClient = client;\r\n}\r\n\r\nexport function handleFileSelect(event) {\r\n    const files = event.target.files;\r\n    const fileListContainer = document.getElementById('file-upload-list');\r\n    const importOptions = document.getElementById('importOptions');\r\n    \r\n    if (!files.length) {\r\n        return;\r\n    }\r\n\r\n    fileListContainer.innerHTML = ''; // Clear previous list\r\n\r\n    Array.from(files).forEach(file => {\r\n        const fileItem = document.createElement('div');\r\n        fileItem.className = 'admin-upload-tool__file-list-item';\r\n        fileItem.innerHTML = `\r\n          <div class=\"admin-upload-tool__file-list-item-content flex items-center space-x-2\">\r\n            <i data-lucide=\"file-text\" class=\"w-5 h-5 text-gray-400\"></i>\r\n            <span class=\"text-sm\">${file.name}</span>\r\n          </div>\r\n          <span class=\"text-xs text-gray-500\">${(file.size / 1024).toFixed(1)} KB</span>\r\n        `;\r\n        fileListContainer.appendChild(fileItem);\r\n    });\r\n\r\n    // Show import options\r\n    if (importOptions) {\r\n        importOptions.style.display = 'block';\r\n    }\r\n}\r\n\r\nexport async function processImport() {\r\n    if (!getIsAdmin()) {\r\n        alert('Access denied. Admin privileges required.');\r\n        return;\r\n    }\r\n\r\n    const fileInput = document.getElementById('fileInput');\r\n    const importError = document.getElementById('importError');\r\n    const importOptions = document.getElementById('importOptions');\r\n\r\n    if (!fileInput.files.length) {\r\n        showError('Please select a file to upload.');\r\n        return;\r\n    }\r\n\r\n    try {\r\n        // Hide error and show loading\r\n        if (importError) importError.style.display = 'none';\r\n        if (importOptions) importOptions.style.display = 'none';\r\n\r\n        const file = fileInput.files[0];\r\n        // Validate file is JSON\r\n        const text = await file.text();\r\n        let assessmentData;\r\n        try {\r\n            assessmentData = JSON.parse(text);\r\n        } catch (e) {\r\n            showError('Invalid JSON file.');\r\n            return;\r\n        }\r\n        \r\n        // Debug: Log the parsed data to see what we're working with\r\n        console.log('Parsed assessment data:', assessmentData);\r\n        console.log('compliance_certifications field:', assessmentData.compliance_certifications);\r\n        console.log('compliance_certifications type:', typeof assessmentData.compliance_certifications);\r\n        console.log('Is array?', Array.isArray(assessmentData.compliance_certifications));\r\n        \r\n        // Validate only the essential required fields\r\n        const requiredFields = ['name', 'total_score', 'risk_level'];\r\n        const missingFields = requiredFields.filter(field => !assessmentData[field]);\r\n        \r\n        if (missingFields.length > 0) {\r\n            console.log('Missing fields:', missingFields);\r\n            showError(`Invalid assessment file format. Missing required fields: ${missingFields.join(', ')}`);\r\n            return;\r\n        }\r\n        \r\n        // Validate score fields exist (can be 0)\r\n        const scoreFields = ['data_storage_score', 'training_usage_score', 'access_controls_score', 'compliance_score', 'vendor_transparency_score'];\r\n        const missingScores = scoreFields.filter(field => assessmentData[field] === undefined || assessmentData[field] === null);\r\n        \r\n        if (missingScores.length > 0) {\r\n            showError(`Invalid assessment file format. Missing score fields: ${missingScores.join(', ')}`);\r\n            return;\r\n        }\r\n        \r\n        // Validate detailed_assessment structure (optional but recommended)\r\n        if (assessmentData.detailed_assessment && typeof assessmentData.detailed_assessment !== 'object') {\r\n            showError('Invalid assessment file format. detailed_assessment must be an object if present.');\r\n            return;\r\n        }\r\n        \r\n        // Prepare multipart/form-data\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n        // Get Supabase access token\r\n        const { data: sessionData } = await supabaseClient.auth.getSession();\r\n        const accessToken = sessionData.session?.access_token;\r\n        if (!accessToken) {\r\n            showError('Authentication error: No access token found. Please log in again.');\r\n            return;\r\n        }\r\n        // Upload to Supabase Edge Function with Authorization header\r\n        const response = await fetch('https://lgybmsziqjdmmxdiyils.functions.supabase.co/upload-assessment', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': `Bearer ${accessToken}`\r\n            },\r\n            body: formData\r\n        });\r\n        const result = await response.json();\r\n        if (!response.ok) {\r\n            showError(result.error || 'Upload failed');\r\n            return;\r\n        }\r\n        alert('Assessment uploaded successfully!');\r\n        // Clear the form\r\n        fileInput.value = '';\r\n        document.getElementById('file-upload-list').innerHTML = '';\r\n        // Refresh the assessments list\r\n        await loadAssessments();\r\n        updateDashboardStats();\r\n        updateProgressTracking();\r\n    } catch (error) {\r\n        showError(`Upload failed: ${error.message}`);\r\n    }\r\n}\r\n\r\nfunction showError(message) {\r\n    const importError = document.getElementById('importError');\r\n    if (importError) {\r\n        importError.textContent = message;\r\n        importError.style.display = 'block';\r\n    }\r\n}\r\n","// js/dashboard/ui.js\n// Manages general UI interactions, such as tab switching,\n// notifications, and dynamic component updates. \n\nimport { getCurrentUser } from './auth.js';\nimport { filterAssessmentsLegacy as filterAssessments } from './assessments.js';\nimport { handleFileSelect } from './import.js';\n\nlet currentTab = 'dashboard';\n\nexport function updateTierBadge() {\n    const tierBadge = document.getElementById('tierBadge');\n    if (tierBadge) {\n        const user = getCurrentUser();\n        const tier = user?.user_metadata?.tier || 'free';\n        tierBadge.textContent = tier.toUpperCase();\n        tierBadge.className = `text-xs px-2 py-0.5 rounded-full ${\n            tier === 'pro' ? 'bg-purple-600' : 'bg-green-600'\n        }`;\n    }\n}\n\nexport function switchTab(tabName) {\n    currentTab = tabName;\n\n    // Hide all tab contents\n    document.querySelectorAll('.tab-content').forEach(content => {\n        content.classList.remove('active');\n    });\n\n    // Update nav button styles\n    document.querySelectorAll('.dashboard-nav').forEach(btn => {\n        btn.classList.remove('active');\n    });\n\n    // Show the selected tab content\n    const activeContent = document.getElementById(`${tabName}-content`);\n    if (activeContent) {\n        activeContent.classList.add('active');\n    }\n\n    // Highlight the selected nav button\n    const activeBtn = document.querySelector(`[onclick=\"switchTab('${tabName}')\"]`);\n    if (activeBtn) {\n        activeBtn.classList.add('active');\n    }\n\n    if (!activeContent && tabName !== 'dashboard') {\n        switchTab('dashboard');\n    }\n}\n\nexport function setupEventListeners() {\n    const dropzone = document.getElementById('dropzone');\n    const fileInput = document.getElementById('fileInput');\n\n    if (dropzone) {\n        dropzone.addEventListener('click', () => fileInput.click());\n        dropzone.addEventListener('dragover', (e) => {\n            e.preventDefault();\n            dropzone.classList.add('active');\n        });\n        dropzone.addEventListener('dragleave', () => {\n            dropzone.classList.remove('active');\n        });\n        dropzone.addEventListener('drop', (e) => {\n            e.preventDefault();\n            dropzone.classList.remove('active');\n            if (e.dataTransfer.files.length) {\n                fileInput.files = e.dataTransfer.files;\n                handleFileSelect({ target: fileInput });\n            }\n        });\n    }\n\n    if(fileInput) {\n        fileInput.addEventListener('change', handleFileSelect);\n    }\n    \n    const searchInput = document.getElementById('searchInput');\n    if (searchInput) {\n        searchInput.addEventListener('input', filterAssessments);\n    }\n    \n    const riskFilter = document.getElementById('riskFilter');\n    if (riskFilter) {\n        riskFilter.addEventListener('change', filterAssessments);\n    }\n    \n    const categoryFilter = document.getElementById('categoryFilter');\n    if (categoryFilter) {\n        categoryFilter.addEventListener('change', filterAssessments);\n    }\n    \n    const sortSelect = document.getElementById('sortSelect');\n    if (sortSelect) {\n        sortSelect.addEventListener('change', filterAssessments);\n    }\n}\n\nexport function closeBanner() {\n    const banner = document.getElementById('promoBanner');\n    if (banner) {\n        banner.style.display = 'none';\n    }\n} ","import { getAssessments } from './assessments.js';\r\n\r\n// Achievement data management and rendering\r\nexport class AchievementsManager {\r\n    constructor(containerSelector = '.dashboard-achievements') {\r\n        this.container = document.querySelector(containerSelector);\r\n        this.achievementsData = this.getAchievementDefinitions();\r\n        this.assessmentsCount = 0;\r\n    }\r\n\r\n    initialize() {\r\n        if (!this.container) {\r\n            console.warn('Achievements container not found.');\r\n            return;\r\n        }\r\n        \r\n        // Initial update\r\n        this.updateProgress();\r\n        \r\n        // Listen for assessment changes\r\n        document.addEventListener('assessmentsUpdated', () => {\r\n            this.updateProgress();\r\n        });\r\n    }\r\n\r\n    getAchievementDefinitions() {\r\n        return [\r\n            {\r\n                id: 'rookie',\r\n                name: 'Risk Assessment Rookie',\r\n                description: 'Complete your first assessment',\r\n                icon: 'check-circle',\r\n                requiredCount: 1\r\n            },\r\n            {\r\n                id: 'detective',\r\n                name: 'Risk Detective',\r\n                description: 'Complete 10 assessments',\r\n                icon: 'search',\r\n                requiredCount: 10\r\n            },\r\n            {\r\n                id: 'power_user',\r\n                name: 'Power User',\r\n                description: 'Complete 25 assessments',\r\n                icon: 'zap',\r\n                requiredCount: 25\r\n            },\r\n            {\r\n                id: 'risk_master',\r\n                name: 'Risk Master',\r\n                description: 'Complete 50 assessments',\r\n                icon: 'shield',\r\n                requiredCount: 50\r\n            }\r\n        ];\r\n    }\r\n\r\n    calculateProgress(achievement) {\r\n        const current = this.assessmentsCount;\r\n        const required = achievement.requiredCount;\r\n        const isUnlocked = current >= required;\r\n        const percentage = Math.min(100, (current / required) * 100);\r\n\r\n        return {\r\n            isUnlocked,\r\n            percentage,\r\n            current,\r\n            required\r\n        };\r\n    }\r\n\r\n    renderAchievementCard(achievement) {\r\n        const progress = this.calculateProgress(achievement);\r\n        const isUnlocked = progress.isUnlocked;\r\n        const percentage = progress.percentage;\r\n        let status = '';\r\n        if (isUnlocked) status = 'unlocked';\r\n        else if (percentage > 0) status = 'in-progress';\r\n        else status = 'locked';\r\n\r\n        // Icon color class\r\n        const iconClass = `achievement-icon ${status}`;\r\n        const nameClass = `achievement-name ${status}`;\r\n\r\n        return `\r\n            <div class=\"achievement-card ${status}\">\r\n                <div class=\"achievement-content\">\r\n                    <div class=\"achievement-header\">\r\n                        <i data-lucide=\"${achievement.icon}\" class=\"${iconClass}\"></i>\r\n                        <span class=\"${nameClass}\">${achievement.name}</span>\r\n                    </div>\r\n                    <p class=\"achievement-description\">${achievement.description}</p>\r\n                    <div class=\"achievement-progress-wrapper\">\r\n                        <div class=\"achievement-progress\">\r\n                            <div class=\"progress-bar ${status}\" style=\"width: ${percentage}%;\"></div>\r\n                        </div>\r\n                        <span class=\"progress-numbers\">${progress.current}/${progress.required}</span>\r\n                    </div>\r\n                    <div class=\"unlock-status\">\r\n                        <i data-lucide=\"check\" class=\"w-4 h-4\"></i>\r\n                        <span>Unlocked!</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    render() {\r\n        if (!this.container) return;\r\n\r\n        const achievementsHTML = this.achievementsData\r\n            .map(achievement => this.renderAchievementCard(achievement))\r\n            .join('');\r\n\r\n        this.container.innerHTML = `\r\n            <div class=\"dashboard-achievements__list\">\r\n                ${achievementsHTML}\r\n            </div>\r\n        `;\r\n\r\n        if (window.lucide) {\r\n            window.lucide.createIcons();\r\n        }\r\n    }\r\n\r\n    updateProgress() {\r\n        this.assessmentsCount = getAssessments().length;\r\n        this.render();\r\n    }\r\n}\r\n\r\n// Initialize achievements on page load\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    const achievementsManager = new AchievementsManager();\r\n    achievementsManager.initialize();\r\n});\r\n\r\nfunction renderAchievements(completedCount) {\r\n    const container = document.querySelector('.dashboard-achievements');\r\n    if (!container) return;\r\n\r\n    const achievements = getAchievements();\r\n\r\n    const content = achievements.map(achievement => {\r\n        const isUnlocked = completedCount >= achievement.goal;\r\n        const progress = Math.min(completedCount, achievement.goal);\r\n        const percentage = achievement.goal > 0 ? (progress / achievement.goal) * 100 : 0;\r\n        \r\n        const status = isUnlocked ? 'unlocked' : (progress > 0 ? 'in-progress' : 'locked');\r\n        const icon = isUnlocked ? 'check-circle-2' : achievement.icon;\r\n\r\n        return `\r\n            <div class=\"achievement-card ${status}\">\r\n                <div class=\"achievement-content\">\r\n                    <div class=\"achievement-header\">\r\n                        <i data-lucide=\"${icon}\" class=\"achievement-icon ${status}\"></i>\r\n                        <span class=\"achievement-name ${status}\">${achievement.name}</span>\r\n                    </div>\r\n                    <p class=\"achievement-description\">${achievement.description}</p>\r\n                    \r\n                    <div class=\"achievement-progress-wrapper\">\r\n                        <div class=\"achievement-progress\">\r\n                            <div class=\"progress-bar ${status}\" style=\"width: ${percentage}%\"></div>\r\n                        </div>\r\n                        <span class=\"progress-numbers\">${progress}/${achievement.goal}</span>\r\n                    </div>\r\n                    <div class=\"unlock-status\">\r\n                        <i data-lucide=\"check\" class=\"w-4 h-4\"></i>\r\n                        <span>Unlocked!</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }).join('');\r\n\r\n    container.innerHTML = `\r\n        <div class=\"achievements-header\">\r\n            <h2 class=\"achievements-title\">Achievements</h2>\r\n            <i data-lucide=\"trophy\" class=\"trophy-icon\"></i>\r\n        </div>\r\n        <div class=\"achievements-grid\">\r\n            ${content}\r\n        </div>\r\n    `;\r\n\r\n    if (typeof lucide !== 'undefined') {\r\n        lucide.createIcons();\r\n    }\r\n} ","/**\n * Injects admin-only UI components into the dashboard.\n * This function should only be called after verifying the user is an admin.\n */\nexport function injectDashboardAdminUI() {\n    const navMenu = document.querySelector('nav.space-y-2');\n    if (!navMenu) {\n        console.error(\"Admin UI injection point not found. Looking for nav.space-y-2\");\n        console.log(\"Available nav elements:\", document.querySelectorAll('nav'));\n        return;\n    }\n\n    // Check if the button already exists to prevent duplicates\n    if (document.getElementById('importNavBtn')) {\n        return;\n    }\n\n    const adminButtonHTML = `\n        <button id=\"importNavBtn\" onclick=\"switchTab('import')\" class=\"dashboard-nav\">\n            <div class=\"dashboard-nav__content\">\n                <i data-lucide=\"upload\" class=\"w-5 h-5\"></i>\n                <span class=\"dashboard-nav__text\">Upload Tool Assessment</span>\n            </div>\n        </button>\n    `;\n\n    navMenu.insertAdjacentHTML('beforeend', adminButtonHTML);\n\n    // Re-initialize icons if necessary\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n} ","// js/dashboard/compare.js\r\n// Logic for the Compare Tools tab: dynamic rendering, tool selection, and interactivity\r\n\r\nimport { loadAssessments, getAssessments } from './assessments.js';\r\nimport { getRiskLevel } from '../assessment/scoring.js';\r\n\r\n// Placeholder for tool data (to be replaced with real data integration)\r\nlet allTools = [];\r\nlet selectedTools = [];\r\nlet showModal = false;\r\nlet modalSearchTerm = '';\r\nlet expandedToolId = null;\r\n\r\nexport function initCompareTools(toolData) {\r\n    // Use only the user's real assessments as the source of truth\r\n    allTools = toolData || [];\r\n    showModal = false;\r\n    modalSearchTerm = '';\r\n    renderSummaryCards();\r\n    renderSelectedTags();\r\n    renderTable();\r\n    renderLegend();\r\n    renderModal();\r\n    setupEventListeners();\r\n}\r\n\r\nfunction renderSummaryCards() {\r\n    const total = selectedTools.length;\r\n    const high = selectedTools.filter(t => getRiskLevel(t.total_score || (t.assessment_data && t.assessment_data.finalScore) || 0) === 'high').length;\r\n    const medium = selectedTools.filter(t => getRiskLevel(t.total_score || (t.assessment_data && t.assessment_data.finalScore) || 0) === 'medium').length;\r\n    const low = selectedTools.filter(t => getRiskLevel(t.total_score || (t.assessment_data && t.assessment_data.finalScore) || 0) === 'low').length;\r\n    const critical = selectedTools.filter(t => getRiskLevel(t.total_score || (t.assessment_data && t.assessment_data.finalScore) || 0) === 'critical').length;\r\n    document.getElementById('compare-summary-total').innerHTML = `<div class=\"compare-tools__summary-label\">Total Tools</div><div class=\"compare-tools__summary-value\">${total}</div>`;\r\n    document.getElementById('compare-summary-high').innerHTML = `<div class=\"compare-tools__summary-label\">High Risk</div><div class=\"compare-tools__summary-value\">${high}</div>`;\r\n    document.getElementById('compare-summary-medium').innerHTML = `<div class=\"compare-tools__summary-label\">Medium Risk</div><div class=\"compare-tools__summary-value\">${medium}</div>`;\r\n    document.getElementById('compare-summary-low').innerHTML = `<div class=\"compare-tools__summary-label\">Low Risk</div><div class=\"compare-tools__summary-value\">${low}</div>`;\r\n    document.getElementById('compare-summary-critical').innerHTML = `<div class=\"compare-tools__summary-label\">Critical Risk</div><div class=\"compare-tools__summary-value\">${critical}</div>`;\r\n}\r\n\r\nfunction renderSelectedTags() {\r\n    const container = document.getElementById('compare-selected-tags');\r\n    if (!container) return;\r\n    container.innerHTML = selectedTools.map(tool => `\r\n        <span class=\"compare-tools__tag\">\r\n            ${tool.name}\r\n            <button class=\"compare-tools__tag-remove\" data-tool-id=\"${tool.id}\" title=\"Remove\">&times;</button>\r\n        </span>\r\n    `).join('');\r\n    if (selectedTools.length > 0) {\r\n        container.innerHTML += `<button class=\"compare-tools__clear-all-btn\" title=\"Clear All\">Clear All</button>`;\r\n    }\r\n}\r\n\r\nfunction getRiskColorClass(score) {\r\n    const risk = getRiskLevel(score);\r\n    return `text-risk-${risk}`;\r\n}\r\n\r\nfunction renderTable() {\r\n    const tbody = document.getElementById('compare-tools-table-body');\r\n    if (!tbody) return;\r\n    tbody.innerHTML = selectedTools.map(tool => {\r\n        const ad = tool.assessment_data || {};\r\n        const formData = ad.formData || {};\r\n        const breakdown = ad.breakdown || {};\r\n        const scores = breakdown.scores || {};\r\n        const detailedAssessment = ad.detailedAssessment || {};\r\n        const recommendations = ad.recommendations || [];\r\n        const isExpanded = expandedToolId === tool.id;\r\n\r\n        // Compliance info (ensure they are strings)\r\n        const complianceCerts = Array.isArray(tool.compliance_certifications) ? tool.compliance_certifications.map(String).join(', ') : '-';\r\n        const complianceSummary = ad.compliance_summary || (detailedAssessment.compliance_summary) || '-';\r\n        \r\n        // Recommendations\r\n        const recs = recommendations.map(r => `\r\n            <div class=\"compare-tools__recommendation\">\r\n                <div class=\"compare-tools__rec-bullet compare-tools__rec-priority--${r.priority}\"></div>\r\n                <div>\r\n                    <h5 class=\"compare-tools__rec-title\">${r.title}</h5>\r\n                    <p class=\"compare-tools__rec-desc\">${r.description}</p>\r\n                    <span class=\"compare-tools__rec-meta\">Priority: ${r.priority} | Category: ${r.category}</span>\r\n                </div>\r\n            </div>\r\n        `).join('') || '<p>No recommendations available</p>';\r\n\r\n        // Detailed Breakdown (ensure assessment_details is an object)\r\n        const detailsHTML = (typeof detailedAssessment.assessment_details === 'object' && detailedAssessment.assessment_details !== null \r\n            ? Object.entries(detailedAssessment.assessment_details) : []\r\n        ).map(([key, detail]) => {\r\n            const categoryScore = detail.category_score || 0;\r\n            return `\r\n                <div class=\"compare-tools__detail-card\">\r\n                    <h5 class=\"compare-tools__detail-title\">${key.replace(/_/g, ' ').replace(/\\b\\w/g, char => char.toUpperCase())}</h5>\r\n                    <div class=\"compare-tools__detail-score\">Score: ${categoryScore}</div>\r\n                    <div class=\"compare-tools__detail-content\">\r\n                        ${(typeof detail.criteria === 'object' && detail.criteria !== null \r\n                            ? Object.entries(detail.criteria) : []\r\n                        ).map(([critKey, crit]) => `\r\n                            <div class=\"compare-tools__detail-item\">\r\n                                <strong>${critKey.replace(/_/g, ' ').replace(/\\b\\w/g, char => char.toUpperCase())}:</strong> ${crit.score} - ${crit.justification}\r\n                            </div>\r\n                        `).join('')}\r\n                    </div>\r\n                </div>\r\n            `;\r\n        }).join('') || '<p>No detailed assessment available</p>';\r\n\r\n        // Compliance Icons (adapt from example)\r\n        const complianceIcons = (typeof tool.compliance === 'object' && tool.compliance !== null ? Object.entries(tool.compliance) : []).map(([key, status]) => {\r\n            const icon = status === 'compliant' ? '<i data-lucide=\"check-circle\" class=\"compare-tools__compliance-icon compare-tools__compliance-icon--compliant\"></i>' : '<i data-lucide=\"x-circle\" class=\"compare-tools__compliance-icon compare-tools__compliance-icon--noncompliant\"></i>';\r\n            return `<div class=\"compare-tools__compliance-item\">${icon} <span>${key.toUpperCase()}</span></div>`;\r\n        }).join('') || '<p>No compliance data</p>';\r\n\r\n        // Score values - Accessing from top-level `tool` object\r\n        const dataStorage = tool.data_storage_score ?? '-';\r\n        const trainingUsage = tool.training_usage_score ?? '-';\r\n        const accessControls = tool.access_controls_score ?? '-';\r\n        const complianceRisk = tool.compliance_score ?? '-';\r\n        const vendorTransparency = tool.vendor_transparency_score ?? '-';\r\n\r\n        const totalScore = tool.total_score || ad.finalScore || 0;\r\n        const risk = getRiskLevel(totalScore);\r\n        return `\r\n        <tr class=\"compare-tools__row compare-tools__row--${risk}\">\r\n            <td class=\"compare-tools__tool-cell\" data-tool-id=\"${tool.id}\" style=\"cursor: pointer;\">\r\n                <button class=\"compare-tools__expand-btn\" aria-expanded=\"${isExpanded}\">\r\n                    <span class=\"chevron${isExpanded ? ' chevron--down' : ''}\"></span>\r\n                </button>\r\n                <div class=\"compare-tools__tool-name\">${tool.name || formData.toolName || 'Unknown Tool'}</div>\r\n                <div class=\"compare-tools__tool-version\">${formData.toolVersion ? formData.toolVersion : ''}</div>\r\n                <div class=\"compare-tools__tool-category\">${tool.vendor || formData.toolCategory || tool.category || ''}</div>\r\n            </td>\r\n            <td>\r\n                <span class=\"compare-tools__tag compare-tools__tag--${risk}\">\r\n                    ${capitalize(risk)}\r\n                </span>\r\n            </td>\r\n            <td><span class=\"compare-tools__score ${getRiskColorClass(totalScore)}\">${totalScore}</span><span class=\"compare-tools__score-max\">/100</span></td>\r\n            <td><span class=\"compare-tools__score\">${dataStorage}</span></td>\r\n            <td><span class=\"compare-tools__score\">${trainingUsage}</span></td>\r\n            <td><span class=\"compare-tools__score\">${accessControls}</span></td>\r\n            <td><span class=\"compare-tools__score\">${complianceRisk}</span></td>\r\n            <td><span class=\"compare-tools__score\">${vendorTransparency}</span></td>\r\n            <!-- Removed Compliance Column -->\r\n        </tr>\r\n        <tr class=\"compare-tools__details-row\" style=\"display:${isExpanded ? 'table-row' : 'none'}\">\r\n            <td colspan=\"8\"> <!-- Changed colspan from 9 to 8 -->\r\n                <div class=\"compare-tools__details\">\r\n                    <div class=\"compare-tools__tabs\">\r\n                        <button class=\"compare-tools__tab compare-tools__tab--active\" data-tab=\"details\" data-tool-id=\"${tool.id}\">\r\n                            <i data-lucide=\"bar-chart-3\"></i>\r\n                            Risk Assessment Details\r\n                        </button>\r\n                        <button class=\"compare-tools__tab\" data-tab=\"recommendations\" data-tool-id=\"${tool.id}\">\r\n                            <i data-lucide=\"lightbulb\"></i>\r\n                            Recommendations\r\n                        </button>\r\n                        <button class=\"compare-tools__tab\" data-tab=\"compliance\" data-tool-id=\"${tool.id}\">\r\n                            <i data-lucide=\"shield-check\"></i>\r\n                            Compliance Status\r\n                        </button>\r\n                    </div>\r\n                    \r\n                    <div class=\"compare-tools__tab-content compare-tools__tab-content--active\" data-content=\"details\">\r\n                        <div class=\"compare-tools__details-grid\">\r\n                            ${detailsHTML}\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class=\"compare-tools__tab-content\" data-content=\"recommendations\">\r\n                        <div class=\"compare-tools__recommendations-list\">\r\n                            ${recs}\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class=\"compare-tools__tab-content\" data-content=\"compliance\">\r\n                        <div class=\"compare-tools__compliance-content\">\r\n                            <div class=\"compare-tools__compliance-grid\">\r\n                                ${complianceIcons}\r\n                            </div>\r\n                            <!-- Display detailed compliance summary -->\r\n                            <div class=\"compare-tools__compliance-summary\">\r\n                                <p><strong>Data Classification:</strong> ${tool.data_classification || 'Not specified'}</p>\r\n                                <p><strong>Use Case:</strong> ${tool.primary_use_case || 'Not specified'}</p>\r\n                                <p><strong>Documentation Tier:</strong> ${tool.documentation_tier || 'Not specified'}</p>\r\n                                <p><strong>Summary:</strong> ${complianceSummary}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </td>\r\n        </tr>\r\n        `;\r\n    }).join('');\r\n    // Attach expand/collapse listeners to the tool cell\r\n    tbody.querySelectorAll('.compare-tools__tool-cell').forEach(cell => {\r\n        cell.addEventListener('click', e => {\r\n            if (e.target.closest('.compare-tools__expand-btn')) return; // Allow button click if needed, but since whole cell is clickable\r\n            const toolId = cell.getAttribute('data-tool-id');\r\n            expandedToolId = expandedToolId === toolId ? null : toolId;\r\n            renderTable();\r\n        });\r\n    });\r\n    \r\n    // Add tab switching functionality\r\n    tbody.querySelectorAll('.compare-tools__tab').forEach(tab => {\r\n        tab.addEventListener('click', e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            \r\n            const targetTab = tab.getAttribute('data-tab');\r\n            const toolId = tab.getAttribute('data-tool-id');\r\n            \r\n            // Find the parent details container\r\n            const detailsContainer = tab.closest('.compare-tools__details');\r\n            \r\n            // Remove active class from all tabs and content in this tool's details\r\n            detailsContainer.querySelectorAll('.compare-tools__tab').forEach(t => t.classList.remove('compare-tools__tab--active'));\r\n            detailsContainer.querySelectorAll('.compare-tools__tab-content').forEach(c => c.classList.remove('compare-tools__tab-content--active'));\r\n            \r\n            // Add active class to clicked tab and corresponding content\r\n            tab.classList.add('compare-tools__tab--active');\r\n            detailsContainer.querySelector(`[data-content=\"${targetTab}\"]`).classList.add('compare-tools__tab-content--active');\r\n        });\r\n    });\r\n    \r\n    // Keep existing button listener for completeness\r\n    tbody.querySelectorAll('.compare-tools__expand-btn').forEach(btn => {\r\n        btn.addEventListener('click', e => {\r\n            const toolId = btn.getAttribute('data-tool-id');\r\n            expandedToolId = expandedToolId === toolId ? null : toolId;\r\n            renderTable();\r\n        });\r\n    });\r\n\r\n    // Update the export button link\r\n    const exportBtn = document.getElementById('compareExportBtn');\r\n    if (exportBtn && selectedTools.length > 0) {\r\n        const ids = selectedTools.map(t => t.id).join(',');\r\n        exportBtn.href = `export.html?ids=${ids}`;\r\n        exportBtn.classList.remove('disabled');\r\n    } else if (exportBtn) {\r\n        exportBtn.href = 'export.html';\r\n        exportBtn.classList.add('disabled');\r\n    }\r\n}\r\n\r\nfunction renderLegend() {\r\n    document.getElementById('compare-tools-legend').innerHTML = `\r\n      <div class=\"compare-tools__legend-title\">Scoring Legend</div>\r\n      <div class=\"compare-tools__legend-list\">\r\n        <div class=\"compare-tools__legend-item\"><span class=\"compare-tools__legend-dot low\"></span> Low Risk</div>\r\n        <div class=\"compare-tools__legend-item\"><span class=\"compare-tools__legend-dot medium\"></span> Medium Risk</div>\r\n        <div class=\"compare-tools__legend-item\"><span class=\"compare-tools__legend-dot high\"></span> High Risk</div>\r\n        <div class=\"compare-tools__legend-item\"><span class=\"compare-tools__legend-dot compliant\"></span> Compliant</div>\r\n      </div>\r\n    `;\r\n}\r\n\r\nfunction renderModal() {\r\n    let modal = document.getElementById('compare-tools-modal');\r\n    if (!showModal) {\r\n        if (modal) modal.remove();\r\n        return;\r\n    }\r\n    if (!modal) {\r\n        modal = document.createElement('div');\r\n        modal.id = 'compare-tools-modal';\r\n        document.body.appendChild(modal);\r\n    }\r\n    // --- Modal State for Multi-Select ---\r\n    if (!window._modalSelectedTools) window._modalSelectedTools = [...selectedTools];\r\n    let modalSelectedTools = window._modalSelectedTools;\r\n    // --- Filters ---\r\n    const riskLevels = ['ALL', 'HIGH', 'MEDIUM', 'LOW'];\r\n    const vendors = Array.from(new Set(allTools.map(t => t.vendor).filter(Boolean)));\r\n    const riskFilter = window._modalRiskFilter || 'ALL';\r\n    const vendorFilter = window._modalVendorFilter || 'ALL';\r\n    // --- Filtering ---\r\n    const availableTools = allTools.filter(tool => {\r\n        const matchesSearch = tool.name.toLowerCase().includes(modalSearchTerm.toLowerCase()) || (tool.vendor && tool.vendor.toLowerCase().includes(modalSearchTerm.toLowerCase()));\r\n        const score = tool.total_score || (tool.assessment_data && tool.assessment_data.finalScore) || 0;\r\n        const calculatedRisk = getRiskLevel(score);\r\n        const matchesRisk = riskFilter === 'ALL' || calculatedRisk.toUpperCase() === riskFilter;\r\n        const matchesVendor = vendorFilter === 'ALL' || tool.vendor === vendorFilter;\r\n        return matchesSearch && matchesRisk && matchesVendor;\r\n    });\r\n    // --- Modal HTML ---\r\n    modal.innerHTML = `\r\n      <div class=\"compare-tools__modal-overlay\">\r\n        <div class=\"compare-tools__modal-content\">\r\n          <div class=\"compare-tools__modal-header\">\r\n            <h2>Select AI Tools to Compare</h2>\r\n            <button class=\"compare-tools__modal-close\" title=\"Close\">&times;</button>\r\n          </div>\r\n          <div class=\"compare-tools__modal-search-row\">\r\n            <div class=\"compare-tools__modal-search\">\r\n              <input type=\"text\" class=\"compare-tools__modal-search-input\" placeholder=\"Search AI tools...\" value=\"${modalSearchTerm}\" />\r\n            </div>\r\n            <select class=\"compare-tools__modal-filter\" data-filter=\"risk\">\r\n              ${riskLevels.map(risk => `<option value=\"${risk}\"${risk === riskFilter ? ' selected' : ''}>${risk === 'ALL' ? 'All Risk Levels' : risk.charAt(0) + risk.slice(1).toLowerCase() + ' Risk'}</option>`).join('')}\r\n            </select>\r\n            <select class=\"compare-tools__modal-filter\" data-filter=\"vendor\">\r\n              <option value=\"ALL\"${vendorFilter === 'ALL' ? ' selected' : ''}>All Vendors</option>\r\n              ${vendors.map(vendor => `<option value=\"${vendor}\"${vendor === vendorFilter ? ' selected' : ''}>${vendor}</option>`).join('')}\r\n            </select>\r\n          </div>\r\n          <div class=\"compare-tools__modal-list-grid\">\r\n            ${availableTools.length === 0 ? '<div class=\"compare-tools__modal-empty\">No tools found</div>' :\r\n              availableTools.map(tool => {\r\n                const isSelected = modalSelectedTools.some(t => String(t.id) === String(tool.id));\r\n                const score = tool.total_score || (tool.assessment_data && tool.assessment_data.finalScore) || 0;\r\n                const risk = getRiskLevel(score);\r\n                return `\r\n                  <div class=\"compare-tools__modal-item${isSelected ? ' compare-tools__modal-item--selected' : ''}\" data-tool-id=\"${tool.id}\">\r\n                    <div class=\"compare-tools__modal-item-check\">${isSelected ? '&#10003;' : ''}</div>\r\n                    <div class=\"compare-tools__modal-item-info\">\r\n                      <div class=\"compare-tools__modal-item-name\">${tool.name}</div>\r\n                      <div class=\"compare-tools__modal-item-vendor\">${tool.vendor || ''}</div>\r\n                    </div>\r\n                    <div class=\"compare-tools__modal-item-score-group\">\r\n                      <span class=\"compare-tools__modal-item-score compare-tools__modal-item-score--${risk} text-risk-${risk}\">${score}</span>\r\n                      ${getRiskBadge(risk, score)}\r\n                    </div>\r\n                  </div>\r\n                `;\r\n              }).join('')}\r\n          </div>\r\n          <div class=\"compare-tools__modal-footer\">\r\n            <button class=\"compare-tools__modal-cancel\">Cancel</button>\r\n            <button class=\"compare-tools__modal-apply\">Apply Selection</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n}\r\n\r\nexport function setupEventListeners() {\r\n    if (window._compareEventListenersAttached) return;\r\n    window._compareEventListenersAttached = true;\r\n\r\n    document.body.addEventListener('click', async (e) => {\r\n        const addBtn = e.target.closest('.compare-tools__add-btn');\r\n        if (addBtn) {\r\n            if (addBtn.disabled) return;\r\n            addBtn.disabled = true;\r\n            addBtn.classList.add('loading');\r\n            try {\r\n                await loadAssessments();\r\n                initCompareTools(getAssessments());\r\n                window._modalSelectedTools = [...selectedTools];\r\n                showModal = true;\r\n                modalSearchTerm = '';\r\n                renderModal();\r\n                setupModalListeners();\r\n            } finally {\r\n                addBtn.disabled = false;\r\n                addBtn.classList.remove('loading');\r\n            }\r\n        }\r\n\r\n        const tagRemoveBtn = e.target.closest('.compare-tools__tag-remove');\r\n        if (tagRemoveBtn) {\r\n            const toolId = tagRemoveBtn.getAttribute('data-tool-id');\r\n            selectedTools = selectedTools.filter(t => String(t.id) !== String(toolId));\r\n            renderSummaryCards();\r\n            renderSelectedTags();\r\n            renderTable();\r\n        }\r\n\r\n        if (e.target.closest('.compare-tools__clear-all-btn')) {\r\n            selectedTools = [];\r\n            renderSummaryCards();\r\n            renderSelectedTags();\r\n            renderTable();\r\n        }\r\n    });\r\n}\r\n\r\nfunction setupModalListeners() {\r\n    const modal = document.getElementById('compare-tools-modal');\r\n    if (!modal) return;\r\n    // Close modal\r\n    modal.querySelector('.compare-tools__modal-close').addEventListener('click', () => {\r\n        showModal = false;\r\n        window._modalSelectedTools = undefined;\r\n        renderModal();\r\n    });\r\n    modal.querySelector('.compare-tools__modal-overlay').addEventListener('click', (e) => {\r\n        if (e.target === modal.querySelector('.compare-tools__modal-overlay')) {\r\n            showModal = false;\r\n            window._modalSelectedTools = undefined;\r\n            renderModal();\r\n        }\r\n    });\r\n    // Search input\r\n    modal.querySelector('.compare-tools__modal-search-input').addEventListener('input', (e) => {\r\n        const value = e.target.value;\r\n        const cursorPos = e.target.selectionStart;\r\n        window._modalSearchTerm = value;\r\n        updateModalToolList();\r\n        // Restore focus and cursor position\r\n        const input = document.querySelector('.compare-tools__modal-search-input');\r\n        if (input) {\r\n            input.focus();\r\n            input.setSelectionRange(cursorPos, cursorPos);\r\n        }\r\n    });\r\n    // Filter dropdowns\r\n    modal.querySelectorAll('.compare-tools__modal-filter').forEach(select => {\r\n        select.addEventListener('change', (e) => {\r\n            if (select.dataset.filter === 'risk') {\r\n                window._modalRiskFilter = select.value;\r\n            } else if (select.dataset.filter === 'vendor') {\r\n                window._modalVendorFilter = select.value;\r\n            }\r\n            updateModalToolList();\r\n        });\r\n    });\r\n    // Tool selection (multi-select)\r\n    modal.querySelectorAll('.compare-tools__modal-item').forEach(item => {\r\n        item.addEventListener('click', (e) => {\r\n            e.stopPropagation(); // Prevent bubbling to overlay\r\n            const toolId = item.getAttribute('data-tool-id');\r\n            let modalSelectedTools = window._modalSelectedTools || [];\r\n            const idx = modalSelectedTools.findIndex(t => String(t.id) === String(toolId));\r\n            if (idx > -1) {\r\n                modalSelectedTools.splice(idx, 1);\r\n            } else {\r\n                const tool = allTools.find(t => String(t.id) === String(toolId));\r\n                if (tool) modalSelectedTools.push(tool);\r\n            }\r\n            window._modalSelectedTools = modalSelectedTools;\r\n            updateModalToolList();\r\n        });\r\n    });\r\n    // Prevent modal content clicks from bubbling to overlay\r\n    modal.querySelector('.compare-tools__modal-content').addEventListener('click', (e) => {\r\n        e.stopPropagation();\r\n    });\r\n    // Cancel button\r\n    modal.querySelector('.compare-tools__modal-cancel').addEventListener('click', () => {\r\n        showModal = false;\r\n        window._modalSelectedTools = undefined;\r\n        renderModal();\r\n    });\r\n    // Apply button\r\n    modal.querySelector('.compare-tools__modal-apply').addEventListener('click', () => {\r\n        selectedTools = [...(window._modalSelectedTools || [])];\r\n        showModal = false;\r\n        window._modalSelectedTools = undefined;\r\n        renderSummaryCards();\r\n        renderSelectedTags();\r\n        renderTable();\r\n        renderModal();\r\n    });\r\n}\r\n\r\nfunction capitalize(str) {\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\n// Add helper for risk badge\r\nfunction getRiskBadge(risk, score) {\r\n    let color = '', icon = '', label = '';\r\n    switch ((risk || '').toLowerCase()) {\r\n        case 'critical':\r\n            color = 'compare-tools__risk-badge--critical';\r\n            icon = '';\r\n            label = 'CRITICAL';\r\n            break;\r\n        case 'high':\r\n            color = 'compare-tools__risk-badge--high';\r\n            icon = '';\r\n            label = 'HIGH';\r\n            break;\r\n        case 'medium':\r\n            color = 'compare-tools__risk-badge--medium';\r\n            icon = '';\r\n            label = 'MEDIUM';\r\n            break;\r\n        case 'low':\r\n        default:\r\n            color = 'compare-tools__risk-badge--low';\r\n            icon = '';\r\n            label = 'LOW';\r\n            break;\r\n    }\r\n    return `<span class=\"compare-tools__risk-badge ${color}\">${icon} ${label}</span>`;\r\n}\r\n\r\n// Add this helper to update only the tool list in the modal\r\nfunction updateModalToolList() {\r\n    const modal = document.getElementById('compare-tools-modal');\r\n    if (!modal) return;\r\n    const listGrid = modal.querySelector('.compare-tools__modal-list-grid');\r\n    if (!listGrid) return;\r\n    // Use the same filtering/search logic as in renderModal\r\n    const riskFilter = window._modalRiskFilter || 'ALL';\r\n    const vendorFilter = window._modalVendorFilter || 'ALL';\r\n    const modalSearchTerm = window._modalSearchTerm || '';\r\n    const modalSelectedTools = window._modalSelectedTools || [];\r\n    const availableTools = allTools.filter(tool => {\r\n        const matchesSearch = tool.name.toLowerCase().includes(modalSearchTerm.toLowerCase()) || (tool.vendor && tool.vendor.toLowerCase().includes(modalSearchTerm.toLowerCase()));\r\n        const score = tool.total_score || (tool.assessment_data && tool.assessment_data.finalScore) || 0;\r\n        const calculatedRisk = getRiskLevel(score);\r\n        const matchesRisk = riskFilter === 'ALL' || calculatedRisk.toUpperCase() === riskFilter;\r\n        const matchesVendor = vendorFilter === 'ALL' || tool.vendor === vendorFilter;\r\n        return matchesSearch && matchesRisk && matchesVendor;\r\n    });\r\n    listGrid.innerHTML = availableTools.length === 0 ? '<div class=\"compare-tools__modal-empty\">No tools found</div>' :\r\n        availableTools.map(tool => {\r\n            const isSelected = modalSelectedTools.some(t => String(t.id) === String(tool.id));\r\n            const score = tool.total_score || (tool.assessment_data && tool.assessment_data.finalScore) || 0;\r\n            const risk = getRiskLevel(score);\r\n            return `\r\n              <div class=\"compare-tools__modal-item${isSelected ? ' compare-tools__modal-item--selected' : ''}\" data-tool-id=\"${tool.id}\">\r\n                <div class=\"compare-tools__modal-item-check\">${isSelected ? '&#10003;' : ''}</div>\r\n                <div class=\"compare-tools__modal-item-info\">\r\n                  <div class=\"compare-tools__modal-item-name\">${tool.name}</div>\r\n                  <div class=\"compare-tools__modal-item-vendor\">${tool.vendor || ''}</div>\r\n                </div>\r\n                <div class=\"compare-tools__modal-item-score-group\">\r\n                  <span class=\"compare-tools__modal-item-score compare-tools__modal-item-score--${risk} text-risk-${risk}\">${score}</span>\r\n                  ${getRiskBadge(risk, score)}\r\n                </div>\r\n              </div>\r\n            `;\r\n        }).join('');\r\n    // Re-attach listeners for tool selection\r\n    listGrid.querySelectorAll('.compare-tools__modal-item').forEach(item => {\r\n        item.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            const toolId = item.getAttribute('data-tool-id');\r\n            let modalSelectedTools = window._modalSelectedTools || [];\r\n            const idx = modalSelectedTools.findIndex(t => String(t.id) === String(toolId));\r\n            if (idx > -1) {\r\n                modalSelectedTools.splice(idx, 1);\r\n            } else {\r\n                const tool = allTools.find(t => String(t.id) === String(toolId));\r\n                if (tool) modalSelectedTools.push(tool);\r\n            }\r\n            window._modalSelectedTools = modalSelectedTools;\r\n            updateModalToolList();\r\n        });\r\n    });\r\n} ","// js/assessment/scoring.js\n// Contains all business logic for calculating risk scores.\n\n// --- Constants ---\nconst DATA_CLASSIFICATION_MULTIPLIERS = {\n    'phi': 1.4,\n    'financial': 1.3,\n    'trade-secrets': 1.25,\n    'pii': 1.2,\n    'public': 0.9\n};\n\nconst USE_CASE_MULTIPLIERS = {\n    'legal-compliance': 1.3,\n    'finance-accounting': 1.2,\n    'hr-executive': 1.15,\n    'customer-support': 1.1,\n    'development': 0.95,\n    'marketing': 0.9,\n    'research': 1.0,\n    'general': 1.0\n};\n\n// --- Public Functions ---\nexport function generateHeuristicScore(formData) {\n    let score = 60; // Higher default for unknown tools\n    if (formData.toolVersion === 'enterprise') score -= 15;\n    if (formData.toolCategory === 'conversational-ai') score += 15;\n    else if (formData.toolCategory === 'code-assistant') score += 5;\n    else if (formData.toolCategory === 'productivity') score += 10;\n    return Math.min(100, Math.max(20, score));\n}\n\nexport function applyMultipliers(baseScore, formData) {\n    let finalScore = baseScore;\n    const dataMultiplier = DATA_CLASSIFICATION_MULTIPLIERS[formData.dataClassification] || 1;\n    const useCaseMultiplier = USE_CASE_MULTIPLIERS[formData.useCase] || 1;\n    finalScore *= dataMultiplier;\n    finalScore *= useCaseMultiplier;\n    return Math.round(finalScore);\n}\n\nexport function applyClientSideMultipliers(dbData, formData) {\n    if (!dbData) return null;\n\n    const baseScores = {\n        dataStorage: dbData.data_storage_score || 0,\n        trainingUsage: dbData.training_usage_score || 0,\n        accessControls: dbData.access_controls_score || 0,\n        complianceRisk: dbData.compliance_score || 0,\n        vendorTransparency: dbData.vendor_transparency_score || 0\n    };\n\n    const dataMultiplier = DATA_CLASSIFICATION_MULTIPLIERS[formData.dataClassification] || 1.0;\n    baseScores.dataStorage = Math.round(baseScores.dataStorage * dataMultiplier);\n    baseScores.complianceRisk = Math.round(baseScores.complianceRisk * dataMultiplier);\n\n    const useCaseMultiplier = USE_CASE_MULTIPLIERS[formData.useCase] || 1.0;\n    baseScores.complianceRisk = Math.round(baseScores.complianceRisk * useCaseMultiplier);\n    baseScores.accessControls = Math.round(baseScores.accessControls * useCaseMultiplier);\n\n    const totalScore = Object.values(baseScores).reduce((sum, score) => sum + score, 0);\n\n    // Return a structure that mimics the original toolData object for consistency\n    const updatedDetailedAssessment = {\n        ...(dbData.detailed_assessment || {}),\n        final_risk_score: totalScore,\n        final_risk_category: getRiskLevel(totalScore),\n        final_score_with_multiplier: totalScore, // Add and update final_score_with_multiplier\n        assessment_details: { // Ensure assessment_details are updated\n            ...(dbData.detailed_assessment?.assessment_details || {}),\n            data_storage_and_security: {\n                ...(dbData.detailed_assessment?.assessment_details?.data_storage_and_security || {}),\n                category_score: baseScores.dataStorage,\n                criteria: (() => {\n                    const oldCriteria = dbData.detailed_assessment?.assessment_details?.data_storage_and_security?.criteria || {};\n                    const oldCategoryScore = dbData.detailed_assessment?.assessment_details?.data_storage_and_security?.category_score || 0;\n                    const newCategoryScore = baseScores.dataStorage;\n                    const scalingFactor = (oldCategoryScore !== 0) ? (newCategoryScore / oldCategoryScore) : (newCategoryScore > 0 ? 1 : 0);\n\n                    const updatedCriteria = {};\n                    for (const key in oldCriteria) {\n                        if (oldCriteria[key] && typeof oldCriteria[key].score === 'number') {\n                            updatedCriteria[key] = {\n                                ...oldCriteria[key],\n                                score: Math.round(oldCriteria[key].score * scalingFactor)\n                            };\n                        } else {\n                            updatedCriteria[key] = oldCriteria[key];\n                        }\n                    }\n                    return updatedCriteria;\n                })()\n            },\n            training_data_usage: {\n                ...(dbData.detailed_assessment?.assessment_details?.training_data_usage || {}),\n                category_score: baseScores.trainingUsage,\n                criteria: (() => {\n                    const oldCriteria = dbData.detailed_assessment?.assessment_details?.training_data_usage?.criteria || {};\n                    const oldCategoryScore = dbData.detailed_assessment?.assessment_details?.training_data_usage?.category_score || 0;\n                    const newCategoryScore = baseScores.trainingUsage;\n                    const scalingFactor = (oldCategoryScore !== 0) ? (newCategoryScore / oldCategoryScore) : (newCategoryScore > 0 ? 1 : 0);\n\n                    const updatedCriteria = {};\n                    for (const key in oldCriteria) {\n                        if (oldCriteria[key] && typeof oldCriteria[key].score === 'number') {\n                            updatedCriteria[key] = {\n                                ...oldCriteria[key],\n                                score: Math.round(oldCriteria[key].score * scalingFactor)\n                            };\n                        } else {\n                            updatedCriteria[key] = oldCriteria[key];\n                        }\n                    }\n                    return updatedCriteria;\n                })()\n            },\n            access_controls: {\n                ...(dbData.detailed_assessment?.assessment_details?.access_controls || {}),\n                category_score: baseScores.accessControls,\n                criteria: (() => {\n                    const oldCriteria = dbData.detailed_assessment?.assessment_details?.access_controls?.criteria || {};\n                    const oldCategoryScore = dbData.detailed_assessment?.assessment_details?.access_controls?.category_score || 0;\n                    const newCategoryScore = baseScores.accessControls;\n                    const scalingFactor = (oldCategoryScore !== 0) ? (newCategoryScore / oldCategoryScore) : (newCategoryScore > 0 ? 1 : 0);\n\n                    const updatedCriteria = {};\n                    for (const key in oldCriteria) {\n                        if (oldCriteria[key] && typeof oldCriteria[key].score === 'number') {\n                            updatedCriteria[key] = {\n                                ...oldCriteria[key],\n                                score: Math.round(oldCriteria[key].score * scalingFactor)\n                            };\n                        } else {\n                            updatedCriteria[key] = oldCriteria[key];\n                        }\n                    }\n                    return updatedCriteria;\n                })()\n            },\n            compliance_and_legal_risk: {\n                ...(dbData.detailed_assessment?.assessment_details?.compliance_and_legal_risk || {}),\n                category_score: baseScores.complianceRisk,\n                criteria: (() => {\n                    const oldCriteria = dbData.detailed_assessment?.assessment_details?.compliance_and_legal_risk?.criteria || {};\n                    const oldCategoryScore = dbData.detailed_assessment?.assessment_details?.compliance_and_legal_risk?.category_score || 0;\n                    const newCategoryScore = baseScores.complianceRisk;\n                    const scalingFactor = (oldCategoryScore !== 0) ? (newCategoryScore / oldCategoryScore) : (newCategoryScore > 0 ? 1 : 0);\n\n                    const updatedCriteria = {};\n                    for (const key in oldCriteria) {\n                        if (oldCriteria[key] && typeof oldCriteria[key].score === 'number') {\n                            updatedCriteria[key] = {\n                                ...oldCriteria[key],\n                                score: Math.round(oldCriteria[key].score * scalingFactor)\n                            };\n                        } else {\n                            updatedCriteria[key] = oldCriteria[key];\n                        }\n                    }\n                    return updatedCriteria;\n                })()\n            },\n            vendor_transparency: {\n                ...(dbData.detailed_assessment?.assessment_details?.vendor_transparency || {}),\n                category_score: baseScores.vendorTransparency,\n                criteria: (() => {\n                    const oldCriteria = dbData.detailed_assessment?.assessment_details?.vendor_transparency?.criteria || {};\n                    const oldCategoryScore = dbData.detailed_assessment?.assessment_details?.vendor_transparency?.category_score || 0;\n                    const newCategoryScore = baseScores.vendorTransparency;\n                    const scalingFactor = (oldCategoryScore !== 0) ? (newCategoryScore / oldCategoryScore) : (newCategoryScore > 0 ? 1 : 0);\n\n                    const updatedCriteria = {};\n                    for (const key in oldCriteria) {\n                        if (oldCriteria[key] && typeof oldCriteria[key].score === 'number') {\n                            updatedCriteria[key] = {\n                                ...oldCriteria[key],\n                                score: Math.round(oldCriteria[key].score * scalingFactor)\n                            };\n                        } else {\n                            updatedCriteria[key] = oldCriteria[key];\n                        }\n                    }\n                    return updatedCriteria;\n                })()\n            }\n        }\n    };\n\n    return {\n        ...dbData, // Pass through original data\n        total_score: totalScore, // The new, client-adjusted total score\n        risk_level: getRiskLevel(totalScore), // Ensure top-level risk_level is also updated\n        compliance_certifications: dbData.compliance_certifications || [], // Ensure compliance certifications are preserved\n        breakdown: {\n            ...dbData.breakdown,\n            scores: baseScores\n        },\n        detailed_assessment: updatedDetailedAssessment, // Ensure the detailed_assessment is updated here\n    };\n}\n\nexport function getRiskLevel(score) {\n    if (score >= 80) return 'critical';\n    if (score >= 60) return 'high';\n    if (score >= 35) return 'medium';\n    return 'low';\n}\n\nexport function generateRecommendations(score, formData) {\n    const riskLevel = getRiskLevel(score);\n    const dataType = formData.dataClassification;\n    let recommendations = [];\n\n    if (riskLevel === 'critical') {\n        recommendations.push('IMMEDIATE ACTION REQUIRED: This tool should not be used with the selected data type.');\n        recommendations.push('Consider enterprise alternatives with stronger security controls.');\n    } else if (riskLevel === 'high') {\n        recommendations.push('Significant security controls required before deployment.');\n        recommendations.push('Implement data loss prevention (DLP) policies and review access.');\n    }\n\n    if (dataType === 'phi') {\n        recommendations.push('HIPAA compliance verification and a signed Business Associate Agreement (BAA) are required.');\n    } else if (dataType === 'financial') {\n        recommendations.push('PCI-DSS and SOX compliance must be verified for the intended use case.');\n    }\n\n    if (recommendations.length === 0) {\n        recommendations.push('Standard security monitoring and user awareness training are recommended.');\n    }\n    \n    return recommendations;\n} "],"names":[],"version":3,"file":"dashboard.74e1f630.js.map","sourceRoot":"/__parcel_source_root/"}