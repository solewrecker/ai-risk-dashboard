<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Tool Risk Dashboard</title>
    <style>
        :root {
            --critical-color: #dc3545;
            --high-color: #fd7e14;
            --medium-color: #ffc107;
            --low-color: #28a745;
            --border-color: #e9ecef;
            --background-color: #f8f9fa;
            --text-color: #495057;
            --heading-color: #212529;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: auto;
        }
        
        /* Executive Summary */
        .executive-summary {
            background-color: #fff;
            padding: 2rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .executive-summary h2 {
            margin-top: 0;
            font-size: 1.75rem;
            color: var(--heading-color);
            display: flex;
            align-items: center;
        }
        .executive-summary h2 svg {
            margin-right: 0.75rem;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .summary-card {
            text-align: center;
        }

        .summary-card .count {
            font-size: 3rem;
            font-weight: 700;
            line-height: 1;
        }
        .summary-card .label {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .summary-card .count.critical { border-left: 5px solid var(--critical-color); color: var(--critical-color); }
        .summary-card .count.high { border-left: 5px solid var(--high-color); color: var(--high-color); }
        .summary-card .count.medium { border-left: 5px solid var(--medium-color); color: var(--medium-color); }
        .summary-card .count.low { border-left: 5px solid var(--low-color); color: var(--low-color); }
        
        /* Tool Card */
        .tool-card {
            background-color: #fff;
            border: 1px solid var(--border-color);
            border-left: 5px solid var(--critical-color); /* Default, will be changed by JS */
            border-radius: 8px;
            margin-bottom: 2rem;
            padding: 1.5rem;
        }
        
        .tool-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .tool-card-header .title-block h3 {
            margin: 0 0 0.25rem 0;
            font-size: 1.75rem;
            color: var(--heading-color);
        }

        .tool-card-header .title-block .meta {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .tool-card-header .score-badge {
            background-color: var(--critical-color); /* Default */
            color: #fff;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .risk-breakdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .breakdown-box {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }

        .breakdown-box .score {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--heading-color);
        }
        
        .breakdown-box .label {
            font-size: 0.8rem;
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .breakdown-box .label svg {
            width: 14px;
            height: 14px;
        }

        /* Detailed Assessment */
        .detailed-assessment {
            margin-top: 2rem;
            border-top: 1px solid var(--border-color);
            padding-top: 1.5rem;
        }

        .detailed-assessment-header {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--heading-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .detailed-assessment-header svg {
            margin-right: 0.75rem;
        }

        .detailed-assessment-header .toggle-arrow {
            margin-left: auto;
            transition: transform 0.2s ease-in-out;
        }
        
        .detailed-assessment-content {
            display: none; /* Hidden by default */
        }
        
        .assessment-category {
            margin-bottom: 1.5rem;
        }
        
        .assessment-category h5 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--heading-color);
            margin: 0 0 0.75rem 0;
            display: flex;
            align-items: center;
        }
        .assessment-category h5 svg {
            margin-right: 0.5rem;
            color: #6c757d;
        }

        .assessment-note {
            padding: 0.75rem 1rem;
            background-color: #f8f9fa;
            border-left: 3px solid #ced4da;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }
        .assessment-note strong {
            color: #495057;
        }

    </style>
</head>
<body>
    <div class="container">
        
        <div class="executive-summary">
            <h2>
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20V10M18 20V4M6 20V16"></path></svg>
                Executive Summary
            </h2>
            <p>This assessment evaluates <strong id="tool-count">0 AI tools</strong> across five critical risk categories, providing actionable insights for enterprise security and compliance decisions.</p>
            <div class="summary-grid">
                <div class="summary-card">
                    <div class="count critical" id="critical-count">0</div>
                    <div class="label">Critical Risk</div>
                </div>
                <div class="summary-card">
                    <div class="count high" id="high-count">0</div>
                    <div class="label">High Risk</div>
                </div>
                <div class="summary-card">
                    <div class="count medium" id="medium-count">0</div>
                    <div class="label">Medium Risk</div>
                </div>
                <div class="summary-card">
                    <div class="count low" id="low-count">0</div>
                    <div class="label">Low Risk</div>
                </div>
            </div>
        </div>

        <div id="dashboard-content">
            <!-- Tool cards will be inserted here -->
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- ICONS ---
            const icons = {
                'Data Storage & Security': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>`,
                'Training Data Usage': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"></path><path d="M20 12V8h-4"></path><path d="M12 20v-4h4"></path><path d="M4 12v4H8"></path><path d="M16.5 7.5l-3 3"></path><path d="M7.5 16.5l3-3"></path><path d="M20 16.5l-3-3"></path><path d="M4 7.5l3 3"></path></svg>`,
                'Access Controls': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>`,
                'Compliance': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 16.5l4-4L16.5 9"></path><path d="M7.5 12H20"></path><path d="M8 7.5l-4 4 3.5 3.5"></path><path d="M4 12h13.5"></path></svg>`,
                'Vendor Transparency': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>`,
                'Details': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>`,
                'Toggle': `<svg class="toggle-arrow" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>`
            };

            fetch('./dashboard_data.json')
                .then(response => {
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    return response.json();
                })
                .then(data => {
                    const dashboardContent = document.getElementById('dashboard-content');
                    if (!data || data.length === 0) return;

                    // --- Process Data ---
                    const summary = { critical: 0, high: 0, medium: 0, low: 0 };
                    data.forEach(tool => {
                        const riskLevel = tool.risk_level.toLowerCase();
                        if (riskLevel.includes('critical')) summary.critical++;
                        else if (riskLevel.includes('high')) summary.high++;
                        else if (riskLevel.includes('medium')) summary.medium++;
                        else if (riskLevel.includes('low')) summary.low++;
                    });

                    // --- Update Executive Summary ---
                    document.getElementById('tool-count').textContent = data.length;
                    document.getElementById('critical-count').textContent = summary.critical;
                    document.getElementById('high-count').textContent = summary.high;
                    document.getElementById('medium-count').textContent = summary.medium;
                    document.getElementById('low-count').textContent = summary.low;

                    // --- Build Tool Cards ---
                    data.sort((a,b) => b.score - a.score).forEach(tool => {
                        const card = document.createElement('div');
                        card.className = 'tool-card';
                        
                        const riskLevel = tool.risk_level.toLowerCase();
                        let riskClass = 'medium';
                        if (riskLevel.includes('critical')) riskClass = 'critical';
                        else if (riskLevel.includes('high')) riskClass = 'high';
                        else if (riskLevel.includes('low')) riskClass = 'low';

                        card.style.borderLeftColor = `var(--${riskClass}-color)`;

                        // --- Breakdown Boxes ---
                        const breakdownBoxesHtml = Object.entries(tool.breakdown).map(([key, value]) => `
                            <div class="breakdown-box">
                                <div class="score">${value}</div>
                                <div class="label">${icons[key] || ''}<span>${key}</span></div>
                            </div>
                        `).join('');

                        // --- Detailed Assessment ---
                        const detailedAssessmentHtml = Object.entries(tool.details).map(([category, notes]) => {
                            const notesHtml = notes.split(',').map(note => {
                                const parts = note.trim().split(/:(.*)/s);
                                return `<div class="assessment-note"><strong>${parts[0]}:</strong>${parts[1] || ' No detailed notes provided'}</div>`;
                            }).join('');
                            return `<div class="assessment-category"><h5>${icons[category] || ''}${category}</h5>${notesHtml}</div>`;
                        }).join('');

                        card.innerHTML = `
                            <div class="tool-card-header">
                                <div class="title-block">
                                    <h3>${tool.name}</h3>
                                    <div class="meta">
                                        Category: ${tool.category || 'N/A'}
                                    </div>
                                </div>
                                <div class="score-badge" style="background-color: var(--${riskClass}-color)">
                                    ${tool.score}/100 ${tool.risk_level.split(' ')[0]}
                                </div>
                            </div>
                            <div class="risk-breakdown-grid">${breakdownBoxesHtml}</div>
                            <div class="detailed-assessment">
                                <div class="detailed-assessment-header">
                                    ${icons.Details} Detailed Risk Assessment ${icons.Toggle}
                                </div>
                                <div class="detailed-assessment-content">
                                    ${detailedAssessmentHtml}
                                </div>
                            </div>
                        `;
                        dashboardContent.appendChild(card);
                    });

                    // --- Add Event Listeners ---
                    dashboardContent.addEventListener('click', (e) => {
                        const header = e.target.closest('.detailed-assessment-header');
                        if (header) {
                            const content = header.nextElementSibling;
                            const arrow = header.querySelector('.toggle-arrow');
                            const isVisible = content.style.display === 'block';

                            content.style.display = isVisible ? 'none' : 'block';
                            arrow.style.transform = isVisible ? 'rotate(0deg)' : 'rotate(180deg)';
                        }
                    });
                })
                .catch(error => {
                    console.error('Error loading or processing dashboard data:', error);
                    document.getElementById('dashboard-content').innerHTML = '<p style="color: red; text-align: center;">Error loading dashboard data. Please check the console for more information.</p>';
                });
        });
    </script>
</body>
</html> 